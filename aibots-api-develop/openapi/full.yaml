openapi: 3.0.3

info:
  title: AIBots Full API
  description: This document describes the Full API interface for AIBots
  version: 1.0.0
  contact:
    name: Moonshot Team
    url: 'https://www.tech.gov.sg/capability-centre-dsaid'
    email: david_tw_lee@tech.gov.sg

servers:
  - url: 'https://aibots.gov.sg/v{major}.{minor}'
    description: Full server address hosted on cloud
    variables:
      major:
        enum:
          - "1"
        default: "1"
      minor:
        enum:
          - "0"
        default: "0"

tags:
  - name: Login
    description: API for logging in users and managing their profile information
  - name: Users
    description: API for managing users
  - name: Groups
    description: API for managing groups
  - name: SCIM
    description: SCIM compliant APIs
  - name: Access Controls
    description: API for managing authentication and authorisation access controls
  - name: API Keys
    description: API for managing API Keys
  - name: Trackers
    description: API for retrieving various resource counts e.g. LLM Tokens
  - name: Files
    description: API for uploading and managing files
  - name: Notifications
    description: API for managing notifications and supporting webhooks
  - name: Agents
    description: API for configuring and controlling Agents and their associated knowledge bases
  - name: Chats
    description: API for managing LLM Chat interactions
  - name: RAG
    description: API for managing and triggering RAG pipelines
  - name: Tools
    description: API for managing Tools
  - name: Schemas
    description: API for retrieving integrated AI components and their associated schemas
  - name: Internals
    description: API for AIBots Internal functionalities

paths:

  # Login
  # Functionality provided by Atlas-Christis
  '/sso/moonshot/logins':
    post:
      tags:
        - Login
      summary: Login via Moonshot SSO
      description: >-
        This API is part of the sutie of APIs that facilitate logins via SSO. 
        The endpoint is structured as such to allow different forms of SSO 
        integrations, with this being the primary form of integration for 
        all Moonshot products.
      operationId: login_moonshot_sso
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SSOMoonshotLoginPOST"
      responses:
        '201':
          description: Successfully logged a user in via Moonshot SSO.
          headers:
            Authorization:
              schema:
                type: string
                format: jwt
              example: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJEU0FJRCwgR292dGVjaCIsInN1YiI6IntcIm5hbWVcIjpcIkRhdmlkdHdsZWVcIixcImlkXCI6XCIwNGUwNTg5Ny0zYzYyLTUyYWEtODY0MC1jYTEyNjQ0MWU1MmNcIixcImVtYWlsXCI6XCJkYXZpZHR3bGVlQGRzYWlkLmdvdi5zZ1wiLFwibmV3X3VzZXJcIjpmYWxzZSxcInNjb3Blc1wiOltdfSIsImF1ZCI6IjA0ZTA1ODk3LTNjNjItNTJhYS04NjQwLWNhMTI2NDQxZTUyYyIsIm5iZiI6MTcwMzA2MDIwNSwiaWF0IjoxNzAzMDYwMjA1LCJleHAiOjE3MDMwNjc0MDUsImp0aSI6ImQxZDIzZTUwLTc3N2UtNDQ5OS1iNzFkLWQwZTE2ZGU2OTc4NSIsImF0X2hhc2giOiJKcDgtbGtCT3lzV1VNelBDbTNSNFNBIn0.i5HMBZHGuNVQggDSad8s1BlfYb7DUKzq1WRZalQ-xOc
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserLogin'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  '/otp/emails':
    post:
      tags:
        - Login
      summary: Send an Email OTP
      description: >-
        This API is part of the suite of APIs that facilitates logins via 
        Email OTPs, to support users/agencies who do not have an SSO support 
        via an Active Directory. This endpoint issues an Email OTP that is 
        cached for a fixed duration, users will need to authenticate with the
        POST /otp/emails/login endpoint with the OTP and email users and a JWT 
        token will be issued. This JWT token should be used to access all features 
        associated with the product.
      operationId: create_email_otp
      security: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OTPEmail'
      responses:
        '201':
          $ref: '#/components/responses/TriggeredResponse'
        '400':
          $ref: '#/components/responses/InvalidParametersError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    get:
      tags:
        - Login
      summary: Retrieves all email OTPs
      description: >-
        This is an internal feature to allow developers to retrieve 
        all email OTPs that were created without having to check
        the database.
      operationId: get_email_otp
      responses:
        '201':
          $ref: '#/components/responses/TriggeredResponse'
        '400':
          $ref: '#/components/responses/InvalidParametersError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  '/otp/emails/logins':
    post:
      tags:
        - Login
      summary: Authenticate via Email OTP
      description: >-
        This API is part of the suite of APIs that facilitates logins via 
        Email OTPs, to support users/agencies who do not have an SSO support 
        via an Active Directory. This endpoint authenticates the Email OTP that
        was previously sent and responds with a JWT token in the Authentication
        header.
      operationId: login_email_otp
      security: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OTPLogin'
      responses:
        '201':
          description: Successfully logged a user in via Email OTP.
          headers:
            Authorization:
              schema:
                type: string
                format: jwt
              example: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJEU0FJRCwgR292dGVjaCIsInN1YiI6IntcIm5hbWVcIjpcIkRhdmlkdHdsZWVcIixcImlkXCI6XCIwNGUwNTg5Ny0zYzYyLTUyYWEtODY0MC1jYTEyNjQ0MWU1MmNcIixcImVtYWlsXCI6XCJkYXZpZHR3bGVlQGRzYWlkLmdvdi5zZ1wiLFwibmV3X3VzZXJcIjpmYWxzZSxcInNjb3Blc1wiOltdfSIsImF1ZCI6IjA0ZTA1ODk3LTNjNjItNTJhYS04NjQwLWNhMTI2NDQxZTUyYyIsIm5iZiI6MTcwMzA2MDIwNSwiaWF0IjoxNzAzMDYwMjA1LCJleHAiOjE3MDMwNjc0MDUsImp0aSI6ImQxZDIzZTUwLTc3N2UtNDQ5OS1iNzFkLWQwZTE2ZGU2OTc4NSIsImF0X2hhc2giOiJKcDgtbGtCT3lzV1VNelBDbTNSNFNBIn0.i5HMBZHGuNVQggDSad8s1BlfYb7DUKzq1WRZalQ-xOc
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserLogin'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  '/logins':
    get:
      tags:
        - Login
      summary: Retrieve all users who are logged in
      description: >-
        This API retrieves all the users logged in and accessible 
        to the administrator, allowing them to manage and revoke 
        login access. This requires administrator privileges.
      operationId: get_logins
      responses:
        '200':
          description: Successfully retrieve online users
          content:
            application/json:
              schema:
                description: List of logged in users
                type: array
                items:
                  $ref: '#/components/schemas/UserLogin'
                default: []
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    delete:
      tags:
        - Login
      summary: Logs a User out
      description: >-
        Logs a user out of the system, invalidating his/her login token. 
        The user will have to reauthenticate with the system after this
        action. If an administrative user utilises the all query parameter,
        they all online users under their management will be log out.
      parameters:
        - description: Logs out all users
          name: all
          in: query
          schema:
            type: boolean
          required: false
      operationId: logout_users
      responses:
        '204':
          $ref: '#/components/responses/DeletedResponse'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /refresh:
    post:
      tags:
        - Login
      summary: Refreshes a User's JWT token
      description: >-
        This API regenerates or refreshes a User's JWT token prior to
        expiry. This operation has to be complete before the token has
        expired otherwise the user has to reauthenticate with the system.
      operationId: refresh_token
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RefreshToken'
      responses:
        '201':
          description: Successfully refreshed a User's JWT token
          headers:
            Authorization:
              schema:
                type: string
                format: jwt
              example: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJEU0FJRCwgR292dGVjaCIsInN1YiI6IntcIm5hbWVcIjpcIkRhdmlkdHdsZWVcIixcImlkXCI6XCIwNGUwNTg5Ny0zYzYyLTUyYWEtODY0MC1jYTEyNjQ0MWU1MmNcIixcImVtYWlsXCI6XCJkYXZpZHR3bGVlQGRzYWlkLmdvdi5zZ1wiLFwibmV3X3VzZXJcIjpmYWxzZSxcInNjb3Blc1wiOltdfSIsImF1ZCI6IjA0ZTA1ODk3LTNjNjItNTJhYS04NjQwLWNhMTI2NDQxZTUyYyIsIm5iZiI6MTcwMzA2MDIwNSwiaWF0IjoxNzAzMDYwMjA1LCJleHAiOjE3MDMwNjc0MDUsImp0aSI6ImQxZDIzZTUwLTc3N2UtNDQ5OS1iNzFkLWQwZTE2ZGU2OTc4NSIsImF0X2hhc2giOiJKcDgtbGtCT3lzV1VNelBDbTNSNFNBIn0.i5HMBZHGuNVQggDSad8s1BlfYb7DUKzq1WRZalQ-xOc
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserLogin'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /queries/agencies:
    get:
      tags:
        - Login
      summary: Retrieve all authorised agencies
      description: >-
        This API allows users to retrieve all authorised agencies within
        the Authentication Profiles. The domains parameter allows users to
        retrieve agencies associated with specific domains.
      operationId: get_agencies
      parameters:
        - $ref: '#/components/parameters/IDListParam'  # Not implemented yet
        - name: domains
          description: Query agencies associated with domain
          in: query
          required: false
          schema:
            type: array
            items:
              type: string
          style: form
          explode: true
        - name: names
          description: Query agencies based on names
          in: query
          required: false
          schema:
            type: array
            items:
              type: string
          style: form
          explode: true
        - name: subgroups
          description: >-
            Indicates if subgroups i.e. groups without a domain code are
            to be included
          in: query
          required: false
          schema:
            type: boolean
      responses:
        '200':
          description: Successfully retrieved all authorised Agencies
          content:
            application/json:
              schema:
                description: List of all authorised Agencies
                type: array
                items:
                  $ref: '#/components/schemas/Agency'
                default: []
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /queries/users:
    post:
      tags:
        - Login
      summary: Retrieve users via queries
      description: >-
        This API allows admin users to retrieve a list of users that they can
        manage. This will default to users within an agency. Non-admin users 
        can only utilise this endpoint with the IDs or Emails query.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserQueriesPOST'
      operationId: get_users_by_query
      responses:
        '200':
          description: Successfully retrieved Users
          content:
            application/json:
              schema:
                description: List of users retrieved
                type: array
                items:
                  $ref: '#/components/schemas/UserBrief'
                default: []
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /users/unverified:
    post:
      tags:
        - Login
      summary: Add unverified users
      description: >-
        This API allows users to add a list of unverified users to the system.
        Unverified users will receive an email notification prompting them to
        login with their email, whereby they will be verified. If a set of 
        users have already been added, whether verified or unverified, they 
        will be ignored and the post-creation state will reflect their current 
        status. Unverified users with a non-government domain e.g. gmail.com
        will be created with access blocked by default, administrative users
        will need to update their authentication permissions separately.
      operationId: create_unverified_users
      requestBody:
        content:
          application/json:
            schema:
              description: List of unverified user email addresses
              type: array
              items:
                type: string
                format: email
      responses:
        '201':
          description: Successfully created a list of unverified Users
          content:
            application/json:
              schema:
                description: List of unverified Users and their associated IDs
                type: array
                items:
                  type: object
                  properties:
                    id:
                      description: Unique ID of the user
                      type: string
                      format: uuid
                    email:
                      description: Email of the user
                      type: string
                      format: uuid
                    state:
                      enum:
                        - created
                        - exists
                        - verified
                      type: string
                      description: >-
                        Indicates the post-creation state
                        
                        created = Unverified user was created
                        exists = Unverified user already exists
                        verified = Verified user already exists
                  additionalProperties: true
                  required:
                    - id
                    - email
                    - state
        '400':
          $ref: '#/components/responses/InvalidParametersError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /profiles/{id}:
    parameters:
      - $ref: '#/components/parameters/IDParam'
    put:
      tags:
        - Login
      summary: Update user profile
      description: >-
        This API allows users to manage their own profile details.
      operationId: update_user_profile
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserProfilePUT'
      responses:
        '204':
          description: Successfully updated User Profile
        '400':
          $ref: '#/components/responses/InvalidParametersError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  # API for managing users
  /users:
    post:
      tags:
        - Users
      summary: Creates a User
      description: >-
        Creates a SCIM User resource via POST (see section 3.3 of RFC 7644). 
        This includes all Atlas SCIM extentions that are available for users.
      operationId: create_user
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ScimUserPOST'
        required: true
      responses:
        201:
          $ref: '#/components/responses/CreatedResponse'
        400:
          $ref: '#/components/responses/InvalidParametersError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        500:
          $ref: '#/components/responses/InternalServerError'
    get:
      tags:
        - Users
      summary: Retrieves Users
      description: >-
        This enables users to query and retrieve User resources
      operationId: get_users
      responses:
        200:
          description: Successfully retrieved a list of Users
          content:
            application/json:
              schema:
                description: List of users
                type: array
                items:
                  $ref: '#/components/schemas/ScimUser'
                default: []
        400:
          $ref: '#/components/responses/ScimInvalidParametersError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        500:
          $ref: '#/components/responses/ScimInternalServerError'
  '/users/{id}':
    parameters:
      - $ref: '#/components/parameters/ScimIDParam'
    put:
      tags:
        - Users
      summary: Updates a SCIM User
      description: >-
        Updates a User resource (see section 3.5.1 of RFC 7644) by replacing
        all the values provided in the payload
      operationId: update_user
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ScimUserPut'
        required: true
      responses:
        204:
          $ref: '#/components/responses/UpdatedResponse'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        400:
          $ref: '#/components/responses/InvalidParametersError'
        404:
          $ref: '#/components/responses/NotFoundError'
        500:
          $ref: '#/components/responses/InternalServerError'
    get:
      tags:
        - Users
      summary: Retrieves a SCIM User
      description: >-
        Retrieves a User resource by Id (see section 3.4.1 of RFC 7644).
      operationId: get_user
      responses:
        200:
          description: Successfully retrieved a SCIM user
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ScimUser'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        404:
          $ref: '#/components/responses/NotFoundError'
        500:
          $ref: '#/components/responses/InternalServerError'
    delete:
      tags:
        - Users
      summary: Deletes a User
      description: Only authorised users are able to deleted users
      operationId: delete_user
      responses:
        204:
          $ref: '#/components/responses/DeletedResponse'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        404:
          $ref: '#/components/responses/ScimNotFoundError'
        500:
          $ref: '#/components/responses/ScimInternalServerError'
  
  '/groups':
    post:
      tags:
        - Groups
      summary: Creates a SCIM Group
      description: >-
        Creates a SCIM Group resource via POST (see section 3.3 of RFC
        7644), includes all the Atlas extensions. Parent Groups must be 
        created prior to associating sub-groups. This set of endpoints 
        are for admin users to manage their agency details.
      operationId: create_group
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ScimGroupPOST'
        required: true
      responses:
        201:
          $ref: '#/components/responses/CreatedResponse'
        400:
          $ref: '#/components/responses/InvalidParametersError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        500:
          $ref: '#/components/responses/InternalServerError'
    get:
      tags:
        - Groups
      summary: Retrieve SCIM Groups
      description: >-
        List and query SCIM Group resources (see section 3.4.2 of RFC 7644).
      operationId: get_groups
      responses:
        200:
          description: Successfully retrieved SCIM Groups
          content:
            application/json:
              schema:
                description: List of SCIM Groups
                type: array
                items:
                  $ref: '#/components/schemas/ScimGroup'
                default: []
        400:
          $ref: '#/components/responses/InvalidParametersError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        500:
          $ref: '#/components/responses/InternalServerError'
  '/groups/{id}':
    parameters:
      - $ref: '#/components/parameters/IDParam'
    put:
      tags:
        - Groups
      summary: Updates a SCIM Group
      description: >-
        Updates a SCIM Group resource (see section 3.5.1 of RFC 7644) by replacing
        all the values provided in the payload
      operationId: update_group
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ScimGroupPUT'
        required: true
      responses:
        204:
          $ref: '#/components/responses/UpdatedResponse'
        400:
          $ref: '#/components/responses/InvalidParametersError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        404:
          $ref: '#/components/responses/NotFoundError'
        500:
          $ref: '#/components/responses/InternalServerError'
    get:
      tags:
        - Groups
      summary: Retrieves a SCIM Group
      description: >-
        Retrieves a SCIM Group resource (see section 3.4.1 of RFC 7644)
      operationId: get_group
      responses:
        200:
          description: Successfully retrieved a Group
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ScimGroup'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        404:
          $ref: '#/components/responses/NotFoundError'
        500:
          $ref: '#/components/responses/InternalServerError'
    delete:
      tags:
        - Groups
      summary: Deletes a SCIM Group
      description: >-
        Deletes a SCIM Group resource (see section 3.6 of RFC 7644). If the 
        Group contains sub-groups, this will return an error
      operationId: delete_group
      responses:
        204:
          $ref: '#/components/responses/DeletedResponse'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        404:
          $ref: '#/components/responses/NotFoundError'
        500:
          $ref: '#/components/responses/InternalServerError'
  '/groups/{id}/parents':
    parameters:
      - $ref: '#/components/parameters/IDParam'
    put:
      tags:
        - Groups
      summary: Updates the parent of a specified group
      description: >-
        Allows administrative users to update the parent hierarchy of created groups
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GroupParentPUT'
      responses:
        '204':
          $ref: '#/components/responses/UpdatedResponse'
        '400':
          $ref: '#/components/responses/InvalidParametersError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  '/groups/{id}/children':
    parameters:
      - $ref: '#/components/parameters/IDParam'
    put:
      tags:
        - Groups
      summary: Updates the children of the specified group
      description: >-
        Allows administrative users to update the child hierarchy of created groups
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GroupChildrenPUT'
      responses:
        '204':
          $ref: '#/components/responses/UpdatedResponse'
        '400':
          $ref: '#/components/responses/InvalidParametersError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  '/groups/{id}/members':
    parameters:
      - $ref: '#/components/parameters/IDParam'
    get:
      tags:
        - Groups
      summary: Retrieves all users belonging to a Group
      description: >-
        Allows administrative users to retrieve a consolidated list of all
        users belonging to a Group and their corresponding sub-groups.
      responses:
        '200':
          description: Successfully retrieved all users belonging to a Group
          content:
            application/json:
              schema:
                description: List of users
                type: array
                items:
                  $ref: '#/components/schemas/UserBrief'
                default: []
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  # Access Controls
  # Functionality provided by Atlas-Christis
  '/scopes':
    post:
      tags:
        - Access Controls
      summary: Add new JWT scope strings to the application
      description: >-
        Allows superusers to add new JWT scope strings representing
        permission rules to the application, particularly if they want 
        to restrict access to new features. Superusers can add fields 
        and attributes to the existing set of resources, they can also 
        create new resources strings but these will be ignored unless 
        the resources are implemented in the system.
      operationId: create_scopes
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ScopeList'
      responses:
        '201':
          description: Successfully added new scope
        '400':
          $ref: '#/components/responses/InvalidParametersError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    get:
      tags:
        - Access Controls
      summary: Retrieve existing scope strings
      description: >-
        Allows superusers to retrieve all scope strings. If the condensed 
        query parameter is added, it returns the scope strings in the most 
        flexible representation possible.
      operationId: get_scopes
      parameters:
        - description: Returns the most flexible string representation of the scopes
          name: condensed
          in: query
          schema:
            type: boolean
          required: false
      responses:
        '200':
          description: Successfully retrieved all scopes
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ScopeList'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    delete:
      tags:
        - Access Controls
      summary: Deletes existing scope strings
      description: >-
        Allows superusers to delete scope strings that they have added.
      operationId: delete_scopes
      parameters:
        - description: Scope strings to be deleted
          name: scopes
          in: query
          schema:
            $ref: '#/components/schemas/ScopeList'
          style: form
          explode: true
          required: true
      responses:
        '204':
          $ref: '#/components/responses/DeletedResponse'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '422':
          $ref: '#/components/responses/InvalidDeletionError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  '/scopes/representations/{format}':
    parameters:
      - description: Supported scope representation format
        name: format
        schema:
          enum:
            - casl
          type: string
          description: >-
            Supported scope representation format
            
            casl = scope set returned in casl format
            atlas = scope set returned in Atlas json format
        in: path
        required: true
    post:
      tags:
        - Access Controls
      summary: Retrieves a representation of the scope set in the specified format
      description: >-
        Retrieves a scope set representation in a format that is parsable by
        the calling system. Only 2 formats are supported at present, CASL
        for applying permissions in the FE and Atlas JSON format.
      operationId: get_scope_format
      requestBody:
        description: List of scope strings to be evaluated
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ScopeList'
      responses:
        '200':
          description: Successfully retrieve a scope set representation
          content:
            application/json:
              schema:
                description: Supported scope representation formats
                type: object
                oneOf:
                  - description: CASL scope representation
                    type: object
                    additionalProperties: true
                  - description: Atlas Scope representation
                    type: array
                    items:
                      $ref: '#/components/schemas/Scope'
                    default: []
        '400':
          $ref: '#/components/responses/InvalidParametersError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  '/roles':
    post:
      tags:
        - Access Controls
      summary: Adds new role to the application
      description: >-
        Roles encapsulate the base set of permissions that a user has.
        This defines the features that the user has access to. If the 
        user attempts to utilise a feature that is not allowed in the 
        permission set, then a permission error will be raised. This
        set of APIs grant administrative users the permissions to 
        modify roles. If a user does not have the necessary permissions 
        to modify roles, a permission error will also be raised.
      operationId: create_role
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RolePOST'
      responses:
        '201':
          $ref: '#/components/responses/CreatedResponse'
        '400':
          $ref: '#/components/responses/InvalidParametersError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    get:
      tags:
        - Access Controls
      summary: Retrieves all roles from the application
      description: >-
        Users will only be able to retrieve roles that they can modify. 
        If a user does not have the necessary permissions to retrieve 
        roles, a permission error will also be raised.
      operationId: get_roles
      responses:
        '200':
          description: Successfully retrieved all Roles from the application
          content:
            application/json:
              schema:
                description: List of Roles
                type: array
                items:
                  $ref: '#/components/schemas/Role'
                default: []
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  '/roles/{id}':
    parameters:
      - $ref: '#/components/parameters/IDParam'
    post:
      tags:
        - Access Controls
      summary: Updates an existing Role
      description: >-
        Updates to the role will only take effect after users have logged
        out and logged in again. If a user does not have the necessary 
        permissions to modify roles, a permission error will be raised.
      operationId: update_role
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RolePUT'
      responses:
        '204':
          $ref: '#/components/responses/UpdatedResponse'
        '400':
          $ref: '#/components/responses/InvalidParametersError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    get:
      tags:
        - Access Controls
      summary: Retrieves a Role
      description: >-
        Users will only be able to retrieve roles that they can modify. 
        Administrative users can use the DELETE /logins to 
        If a user does not have the necessary permissions to retrieve 
        roles, a permission error will be raised.
      operationId: get_role
      responses:
        '200':
          description: Successfully retrieved Role
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Role'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    delete:
      tags:
        - Access Controls
      summary: Deletes a Role
      description: >-
        Administrative users will not be able to delete a role unless all
        users are logged out. They can use the DELETE /logins endpoint 
        force log out all users. If a user does not have the necessary 
        permissions to retrieve roles, a permission error will be raised.
      operationId: delete_role
      responses:
        '204':
          $ref: '#/components/responses/DeletedResponse'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  '/controls/authentications':
    put:
      tags:
        - Access Controls
      summary: Manage authentication access to the application
      description: >-
        Allows administrative users to manage authentication access to the
        application by specifying users and domains. Admin users will only
        be able to manage authentication access within their agency. Only 
        superadmins will be able to manage authentication access for all 
        users. Unspecified users/domains in the payload will be ignored.
        Updates will only be applied when user logs in or when their token
        expires if they are already logged in.
      operationId: update_authentication
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AuthenticationControlsPUT'
      responses:
        '204':
          $ref: '#/components/responses/UpdatedResponse'
        '400':
          $ref: '#/components/responses/InvalidParametersError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '422':
          $ref: '#/components/responses/InvalidUpdateError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    get:
      tags:
        - Access Controls
      summary: List authentication access to the application
      description: >-
        Allows administrative users to view the authentication access of 
        all users and groups under their management.
      operationId: get_authentication
      responses:
        '200':
          description: Successfully retrieved authentication access
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthenticationControls'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /controls/authorizations:
    put:
      tags:
        - Access Controls
      summary: Adds authorization access to specific resources
      description: >-
        This API allows users to modify authorization access to specific 
        resources that they own. This functionality enables users with 
        the proper permissions e.g. admins and owners to add and remove 
        collaborators to/from their resources, as well as modify their
        roles. This set of permissions augment the general role-based 
        permissions that the user is already conferred. If the requesting 
        user does not have the appropriate permissions then an error will
        be raised. Only owners are able to transfer the ownership of the
        resources that they own to other users.
      operationId: update_authorization
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AuthorizationControlsPUT'
      responses:
        '204':
          $ref: '#/components/responses/UpdatedResponse'
        '400':
          $ref: '#/components/responses/InvalidParametersError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '422':
          $ref: '#/components/responses/InvalidUpdateError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  '/permissions/all':
    get:
      tags:
        - Access Controls
      summary: Retrieves the global Permission Set
      description: >-
        This set of endpoints allow superusers to retrieve the set of items 
        globally available to all users. Superusers are also able to customise 
        the individual permissions to correct any issues that may arise in 
        terms of access controls.
      operationId: get_all_permissions
      responses:
        '200':
          description: Successfully retrieve Global Permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Permissions'
        '400':
          $ref: '#/components/responses/InvalidParametersError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    put:
      tags:
        - Access Controls
      summary: Updates the global Permissions Set
      description: >-
        This set of endpoints allow superusers to correct any issues that may
        arise in terms of access controls to individual resources available to 
        all users
      operationId: update_all_permissions
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PermissionsPUT'
      responses:
        '204':
          $ref: '#/components/responses/UpdatedResponse'
        '400':
          $ref: '#/components/responses/InvalidParametersError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  '/permissions/{type}/{id}':
    parameters:
      - name: type
        description: Type of item permissions
        in: path
        required: true
        schema:
          type: string
          enum:
            - user
            - group
            - api_key
          description: >-
            Supported Item types
            
            user = Item is a user
            group = Item is a group
            api_key = Item is an API Key
      - name: id
        description: ID of the item
        in: path
        required: true
        schema:
          type: string
          format: uuid
    get:
      tags:
        - Access Controls
      summary: Retrieves the specified Item Permission Set
      description: >-
        This set of endpoints allow superusers to retrieve the individual 
        permissions associated with a given item. These items could be users, 
        groups and api_keys. This permissions set control access to individual
        resources that the item has been granted access to. Superusers are also
        able to customise the individual permissions to correct any issues that 
        may arise in terms of access controls.
      operationId: get_permissions
      responses:
        '200':
          description: Successfully retrieve Permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Permissions'
        '400':
          $ref: '#/components/responses/InvalidParametersError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    put:
      tags:
        - Access Controls
      summary: Updates the specified Permissions Set
      description: >-
        This set of endpoints allow superusers to correct any issues that may
        arise in terms of access controls to the individual resources
      operationId: update_permissions
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PermissionsPUT'
      responses:
        '204':
          $ref: '#/components/responses/UpdatedResponse'
        '400':
          $ref: '#/components/responses/InvalidParametersError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  # API Keys
  # Functionality provided by Atlas-Christis
  '/apikeys':
    post:
      tags:
        - API Keys
      summary: Creates an API Key
      operationId: create_api_key
      description: >-
        Creates an API Key via POST. An API Key can be associated to either
        a SCIM user or a SCIM group via the id and type parameters. Only 
        superusers are able to create API Keys without the id or type parameters
        i.e. system-level API Keys
      parameters:
        - description: SCIM resource type to associate the API Key to
          name: type
          in: query
          schema:
            description: >-
              SCIM resources that can support API Key association
    
              user = SCIM users
              group = SCIM groups
            type: string
            enum:
              - user
              - group
          required: false
        - description: SCIM resource ID to associate the API Key to
          name: id
          in: query
          schema:
            type: string
            format: uuid
          required: false
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/APIKeyPOST'
        required: true
      responses:
        '201':
          description: Successfully created a API Key
          content:
            application/json:
              schema:
                description: API Key ID and its associated value
                type: object
                properties:
                  id:
                    description: ID of the API Key created
                    type: string
                    format: uuid
                  key:
                    description: API Key value
                    type: string
                required:
                  - id
                  - key
        '400':
          $ref: '#/components/responses/InvalidParametersError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '500':
          $ref: '#/components/responses/ScimInternalServerError'
    get:
      tags:
        - API Keys
      summary: Retrieve API Keys
      operationId: get_api_keys
      description: >-
        List all the API Key resources that the user is able to view.
      responses:
        '200':
          description: Successfully retrieved API Keys
          content:
            application/json:
              schema:
                description: List of API Keys
                type: array
                items:
                  $ref: '#/components/schemas/APIKey'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  '/apikeys/{id}':
    parameters:
      - $ref: '#/components/parameters/IDParam'
    put:
      tags:
        - API Keys
      summary: Updates a API Key
      operationId: update_api_key
      description: >-
        Updates an API Key resource by replacing all the values provided in 
        the payload. If scope values are modified, changes will take place
        immediately.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/APIKeyPUT'
        required: true
      responses:
        '200':
          $ref: '#/components/responses/UpdatedResponse'
        '400':
          $ref: '#/components/responses/InvalidParametersError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    get:
      tags:
        - API Keys
      summary: Retrieves an API Key
      description: >-
        Retrieves an API Key, users are only able to retrieve API Keys that they
        can list.
      operationId: get_api_key
      responses:
        200:
          description: Successfully retrieved an API Key
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/APIKey'
        404:
          $ref: '#/components/responses/ScimNotFoundError'
        500:
          $ref: '#/components/responses/ScimInternalServerError'
    delete:
      tags:
        - API Keys
      summary: Deletes an API Key
      description: >-
        Deletes an API Key. This action is irreversible, if the API Key is 
        integrated into other services, these services will lose access to 
        AIBots capabilities.
      operationId: delete_api_key
      responses:
        '204':
          $ref: '#/components/responses/DeletedResponse'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  # SCIM Resources
  # Functionality provided by Atlas-Christis
  # Adapted from GLUU SCIM resources
  # https://github.com/GluuFederation/scim/blob/master/scim-server/src/main/resources/gluu-scim-openapi.yaml
  '/scim/v2/Groups':
    post:
      tags:
        - SCIM
      summary: Creates a SCIM Group
      description: >-
        Creates a SCIM Group resource via POST (see section 3.3 of RFC
        7644), includes all the Atlas extensions. Parent Groups must be 
        created prior to associating sub-groups.
      operationId: create_scim_group
      parameters:
        - $ref: '#/components/parameters/ScimAttributesParam'
        - $ref: '#/components/parameters/ScimExcludedAttributesParam'
      requestBody:
        content:
          application/scim+json:
            schema:
              $ref: '#/components/schemas/ScimGroup'
          application/json:
            schema:
              $ref: '#/components/schemas/ScimGroup'
        required: true
      responses:
        201:
          description: Successfully created a SCIM Group
          content:
            application/scim+json:
              schema:
                $ref: '#/components/schemas/ScimGroup'
            application/json:
              schema:
                $ref: '#/components/schemas/ScimGroup'
        400:
          $ref: '#/components/responses/ScimInvalidPayloadError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        409:
          $ref: '#/components/responses/ScimDuplicateEntryError'
        500:
          $ref: '#/components/responses/ScimInternalServerError'
    get:
      tags:
        - SCIM
      summary: Retrieve SCIM Groups
      description: >-
        List and query SCIM Group resources (see section 3.4.2 of RFC 7644)
        with pagination
      operationId: get_scim_groups
      parameters:
        - $ref: '#/components/parameters/ScimAttributesParam'
        - $ref: '#/components/parameters/ScimExcludedAttributesParam'
        - $ref: '#/components/parameters/ScimFilterParam'
        - $ref: '#/components/parameters/ScimStartIndexParam'
        - $ref: '#/components/parameters/ScimCountParam'
        - $ref: '#/components/parameters/ScimSortByParam'
        - $ref: '#/components/parameters/ScimSortOrderParam'
      responses:
        200:
          description: Successfully retrieved SCIM Groups
          content:
            application/scim+json:
              schema:
                $ref: '#/components/schemas/ScimGroupListResponse'
            application/json:
              schema:
                $ref: '#/components/schemas/ScimGroupListResponse'
        400:
          $ref: '#/components/responses/ScimInvalidParametersError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        500:
          $ref: '#/components/responses/ScimInternalServerError'
  '/scim/v2/Groups/{id}':
    parameters:
      - $ref: '#/components/parameters/ScimIDParam'
    put:
      tags:
        - SCIM
      summary: Updates a SCIM Group
      description: >-
        Updates a SCIM Group resource (see section 3.5.1 of RFC 7644) by replacing
        all the values provided in the payload
      operationId: update_scim_group
      parameters:
        - $ref: '#/components/parameters/ScimAttributesParam'
        - $ref: '#/components/parameters/ScimExcludedAttributesParam'
      requestBody:
        content:
          application/scim+json:
            schema:
              $ref: '#/components/schemas/ScimGroup'
          application/json:
            schema:
              $ref: '#/components/schemas/ScimGroup'
        required: true
      responses:
        200:
          description: Successfully updated a SCIM Group
          content:
            application/scim+json:
              schema:
                $ref: '#/components/schemas/ScimGroup'
            application/json:
              schema:
                $ref: '#/components/schemas/ScimGroup'
        400:
          $ref: '#/components/responses/ScimInvalidPayloadError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        404:
          $ref: '#/components/responses/ScimNotFoundError'
        409:
          $ref: '#/components/responses/ScimDuplicateEntryError'
        500:
          $ref: '#/components/responses/ScimInternalServerError'
    get:
      tags:
        - SCIM
      summary: Retrieves a SCIM Group
      description: >-
        Retrieves a SCIM Group resource (see section 3.4.1 of RFC 7644)
      operationId: get_scim_group
      parameters:
        - $ref: '#/components/parameters/ScimAttributesParam'
        - $ref: '#/components/parameters/ScimExcludedAttributesParam'
      responses:
        200:
          description: Successful operation
          content:
            application/scim+json:
              schema:
                $ref: '#/components/schemas/ScimGroup'
            application/json:
              schema:
                $ref: '#/components/schemas/ScimGroup'
        404:
          $ref: '#/components/responses/ScimNotFoundError'
        500:
          $ref: '#/components/responses/ScimInternalServerError'
    delete:
      tags:
        - SCIM
      summary: Deletes a SCIM Group
      description: >-
        Deletes a SCIM Group resource (see section 3.6 of RFC 7644). If the 
        Group contains sub-groups, this will return an error
      operationId: delete_scim_group
      responses:
        204:
          $ref: '#/components/responses/DeletedResponse'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        404:
          $ref: '#/components/responses/ScimNotFoundError'
        500:
          $ref: '#/components/responses/ScimInternalServerError'
  '/scim/v2/Users':
    post:
      tags:
        - SCIM
      summary: Creates a SCIM User
      description: >-
        Creates a SCIM User resource via POST (see section 3.3 of RFC 7644). 
        This includes all Atlas SCIM extentions that are available for users.
      operationId: create_scim_user
      parameters:
        - $ref: '#/components/parameters/ScimAttributesParam'
        - $ref: '#/components/parameters/ScimExcludedAttributesParam'
      requestBody:
        content:
          application/scim+json:
            schema:
              $ref: '#/components/schemas/ScimUser'
          application/json:
            schema:
              $ref: '#/components/schemas/ScimUser'
        required: true
      responses:
        201:
          description: Successfully created a SCIM User
          content:
            application/scim+json:
              schema:
                $ref: '#/components/schemas/ScimUser'
            application/json:
              schema:
                $ref: '#/components/schemas/ScimUser'
        400:
          $ref: '#/components/responses/ScimInvalidPayloadError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        409:
          $ref: '#/components/responses/ScimDuplicateEntryError'
        500:
          $ref: '#/components/responses/ScimInternalServerError'
    get:
      tags:
        - SCIM
      summary: Retrieves SCIM Users
      description: >-
        Lists and Query SCIM User resources (see section 3.4.2 of RFC 7644). This 
        enables users to query and retrieve User resources, returning the inputs
        as a paginated list
      operationId: get_scim_users
      parameters:
        - $ref: '#/components/parameters/ScimAttributesParam'
        - $ref: '#/components/parameters/ScimExcludedAttributesParam'
        - $ref: '#/components/parameters/ScimFilterParam'
        - $ref: '#/components/parameters/ScimStartIndexParam'
        - $ref: '#/components/parameters/ScimCountParam'
        - $ref: '#/components/parameters/ScimSortByParam'
        - $ref: '#/components/parameters/ScimSortOrderParam'
      responses:
        200:
          description: Successful operation
          content:
            application/scim+json:
              schema:
                $ref: '#/components/schemas/ScimUserListResponse'
            application/json:
              schema:
                $ref: '#/components/schemas/ScimUserListResponse'
        400:
          $ref: '#/components/responses/ScimInvalidParametersError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        500:
          $ref: '#/components/responses/ScimInternalServerError'
  '/scim/v2/Users/{id}':
    parameters:
      - $ref: '#/components/parameters/ScimIDParam'
    put:
      tags:
        - SCIM
      summary: Updates a SCIM User
      description: >-
        Updates a User resource (see section 3.5.1 of RFC 7644) by replacing
        all the values provided in the payload
      operationId: update_scim_user
      parameters:
        - $ref: '#/components/parameters/ScimAttributesParam'
        - $ref: '#/components/parameters/ScimExcludedAttributesParam'
      requestBody:
        content:
          application/scim+json:
            schema:
              $ref: '#/components/schemas/ScimUser'
          application/json:
            schema:
              $ref: '#/components/schemas/ScimUser'
        required: true
      responses:
        200:
          description: Successfully modified a SCIM User
          content:
            application/scim+json:
              schema:
                $ref: '#/components/schemas/ScimUser'
            application/json:
              schema:
                $ref: '#/components/schemas/ScimUser'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        400:
          $ref: '#/components/responses/ScimInvalidPayloadError'
        404:
          $ref: '#/components/responses/ScimNotFoundError'
        409:
          $ref: '#/components/responses/ScimDuplicateEntryError'
        500:
          $ref: '#/components/responses/ScimInternalServerError'
    get:
      tags:
        - SCIM
      summary: Retrieves a SCIM User
      description: >-
        Retrieves a User resource by Id (see section 3.4.1 of RFC 7644).
      operationId: get_scim_user
      parameters:
        - $ref: '#/components/parameters/ScimAttributesParam'
        - $ref: '#/components/parameters/ScimExcludedAttributesParam'
      responses:
        200:
          description: Successfully retrieved a SCIM user
          content:
            application/scim+json:
              schema:
                $ref: '#/components/schemas/ScimUser'
            application/json:
              schema:
                $ref: '#/components/schemas/ScimUser'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        404:
          $ref: '#/components/responses/ScimNotFoundError'
        500:
          $ref: '#/components/responses/ScimInternalServerError'
    delete:
      tags:
        - SCIM
      summary: Deletes a SCIM User
      description: Only authorised users are able to deleted users
      operationId: delete_scim_user
      responses:
        204:
          $ref: '#/components/responses/DeletedResponse'
        404:
          $ref: '#/components/responses/ScimNotFoundError'
        500:
          $ref: '#/components/responses/ScimInternalServerError'

  # Schema APIs
  /schemas/ai/llms:
    get:
      tags:
        - Schemas
      summary: Retrieves supported AI Models
      description: |-
        This endpoint allows users to retrieve all supported AI Models
      operationId: get_ai_models
      parameters:
        - name: type
          description: Types of models to be retrieved
          in: query
          required: false
          schema:
            $ref: '#/components/schemas/AIModelType'
      responses:
        '200':
          description: Successfully retrieved all supported AI Models
          content:
            application/json:
              schema:
                description: List of supported AI Models
                type: array
                items:
                  $ref: '#/components/schemas/AIModelID'
                default: []
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /schemas/ai/llms/{llm_id}:
    parameters:
      - description: LLM Model ID
        name: llm_id
        in: path
        required: true
        schema:
          $ref: '#/components/schemas/AIModelID'
    get:
      tags:
        - Schemas
      summary: Retrieve a supported AI Model
      description: Retrieves full details of a supported AI Model
      operationId: get_ai_model
      responses:
        '200':
          description: Successfully retrieved AI Model
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AIModel'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /definitions/agents:
    get:
      tags:
        - Schemas
      summary: Default settings form parameters for AI Agents
      description: >-
        Retrieves the default form parameters available for configuring AI 
        Agents
      operationId: get_agent_definitions
      responses:
        '200':
          description: Successfully retrieved Agent settings
          content:
            application/json:
              schema:
                description: Default Agent settings definitions
                type: array
                items:
                  $ref: '#/components/schemas/AtlasParam'
                default: []
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  # Agent APIs
  /agents:
    post:
      tags:
        - Agents
      summary: Creates a new Agent
      description: |-
        An Agent encapsulates various forms of interacting with a Large Language 
        Model (LLM), this could be as diverse as interacting with an image 
        generation model (multi-modal Chat Agent), to performing question and 
        answer on a specified knowledge base (RAG Agent), to performing actions
        on a user's behalf (AI Agent). An Agent can then be served out for other 
        users to interact with it. Agent are highly configurable, this provides 
        Agent creators with the flexibility to serve out Agents that address the 
        needs of their target audience. Agent access can be restricted to 
        different individuals or organisations/groups. They can be cloned with 
        the entire Agent configuration and customised according to their needs. 
        This API call creates a new Agent configuration that structures the 
        interaction.
      operationId: create_agent
      requestBody:
        description: Configuration of Agent to be created
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AgentPOST'
      responses:
        '201':
          $ref: '#/components/responses/CreatedResponse'
        '400':
          $ref: '#/components/responses/InvalidParametersError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    get:
      tags:
        - Agents
      summary: Retrieves all Agents visible to the user
      description: >-
        Returns a list of all Agents that the user is permitted to view and 
        invoke. Supports various query parameters for retrieving public and 
        shared Agents.
      operationId: get_agents
      parameters:
        - $ref: '#/components/parameters/IDListParam'
        - name: featured
          description: Retrive all featured Agents
          in: query
          required: false
          schema:
            type: boolean
        - name: public
          description: Retrieve all Agents available to the WOG
          in: query
          required: false
          schema:
            type: boolean
        - name: owner
          description: Retrieve all Agents that the user owns
          in: query
          required: false
          schema:
            type: boolean
        - name: admin
          description: Retrieve all Agents that the user can edit/manage
          in: query
          required: false
          schema:
            type: boolean
        - name: shared
          description: Retrieve all Agents shared with the user
          in: query
          required: false
          schema:
            type: boolean
      responses:
        '200':
          description: Successfully retrieved Agents
          content:
            application/json:
              schema:
                description: List of Agents
                type: array
                items:
                  $ref: '#/components/schemas/Agent'
                default: []
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /agents/clones:
    post:
      tags:
        - Agents
      summary: Clones a new Agent
      description: |-
        This API call clones a new Agent from an existing Agent configuration.
        It also provides inputs to override existing Agent configuration values.
        When an Agent is cloned, the existing Knowledge Bases will be duplicated,
        including the underlying files. Additional Knowledge Bases can be added
        during the cloning step via the body, however the files must be uploaded
        beforehand.
      operationId: clone_agent
      parameters:
        - description: Denotes the original Agent ID that the configuration is being cloned from
          name: clone
          in: query
          required: true
          schema:
            type: string
            format: uuid
        - description: Triggers the RAG pipeline to generate embeddings for the new Agent
          name: trigger
          in: query
          required: false
          schema:
            type: boolean
      requestBody:
        description: Configuration of Agent to be created
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AgentPOST'
      responses:
        '201':
          $ref: '#/components/responses/CreatedResponse'
        '400':
          $ref: '#/components/responses/InvalidParametersError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  '/agents/counts':
    get:
      tags:
        - Agents
      summary: Retrieves the count of all Agents visible to the user
      description: >-
        Returns a count of all Agents visible to the user.
      operationId: get_agent_counts
      responses:
        '200':
          description: Successfully retrieved Agent count
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AgentCount'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  '/agents/all':
    get:
      tags:
        - Agents
      summary: Retrieves all Agents
      description: >-
        Returns all Agents created, the deleted query parameter can be used to
        include those deleted. This API endpoint can only be utilised by 
        superusers.
      operationId: get_all_agents
      responses:
        '200':
          description: Successfully retrieved all Agents
          content:
            application/json:
              schema:
                description: List of all Agents
                type: array
                items:
                  $ref: '#/components/schemas/AgentBrief'
                default: []
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  '/agents/{id}':
    parameters:
      - $ref: '#/components/parameters/IDParam'
    put:
      tags:
        - Agents
      summary: Updates the core configuration of an existing Agent
      description: |-
        This API enables the user to update the main configuration of an 
        existing Agent.
      operationId: update_agent
      requestBody:
        description: Configuration of Agent to be updated
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AgentPUT'
      responses:
        '204':
          $ref: '#/components/responses/UpdatedResponse'
        '400':
          $ref: '#/components/responses/InvalidParametersError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    get:
      tags:
        - Agents
      summary: Retrieves the configuration of an existing Agent
      description: Retrieves an existing Agent
      operationId: get_agent
      responses:
        '200':
          description: Successfully retrieved Agent
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Agent'
        '400':
          $ref: '#/components/responses/InvalidParametersError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    delete:
      tags:
        - Agents
      summary: Deletes an existing Agent configuration
      description: |-
        Includes the knowledgeBase boolean flag to delete the Knowledge Base 
        associated with the Agent. If the Knowledge Base is shared by other Agents,
        then the files boolean flag will not apply. A push notification will be
        sent upon completion.
      operationId: delete_agent
      parameters:
        - description: Deletes all files associated with the Knowledge Bases
          name: files
          in: query
          required: false
          schema:
            type: boolean
      responses:
        '202':
          description: |-
            Successfully deleted Agent and associated Knowledge Base will be 
            cleared as a background task with a push notification sent.
        '204':
          $ref: '#/components/responses/DeletedResponse'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '422':
          $ref: '#/components/responses/InvalidDeletionError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  '/agents/{id}/knowledge/bases':
    parameters:
      - $ref: '#/components/parameters/IDParam'
    post:
      tags:
        - Agents
      summary: Adds a set of Knowledge Bases to the Agent
      description: |-
        A Knowledge Base is a representation of data that has been imported 
        from a supported data source, with embeddings generated on the data.
        It can import data from multiple sources such as textual content, 
        documents, websites and images. The creation of a Knowledge Base 
        is a 2-step process, first the Knowledge Base is created and the 
        pipeline is triggered via the POST /rag/{id}/pipelines to generate the 
        embeddings. If the RAG pipeline for the Knowledge Base was executed
        successfully, the updated pipeline metadata will be recorded in the 
        Knowledge Base.
      operationId: create_knowledge_base
      requestBody:
        description: List of Knowledge Bases to be created
        required: true
        content:
          application/json:
            schema:
              description: List of Knowledge Bases to be created
              type: array
              items:
                $ref: '#/components/schemas/DataSource'
      responses:
        '201':
          description: Successfully created a List of Knowledge Bases
          content:
            application/json:
              schema:
                description: List of Knowledge Bases
                type: array
                items:
                  $ref: '#/components/schemas/KnowledgeBase'
                minItems: 1
        '400':
          $ref: '#/components/responses/InvalidParametersError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    get:
      tags:
        - Agents
      summary: Retrieves all Knowledge Bases associated with the Agent
      description: |-
        Returns a list of all Knowledge Bases associated with the Agent
      operationId: get_knowledge_bases
      parameters:
        - description: Retrieve Knowledge Bases associated with the following Agents
          name: agents
          in: query
          schema:
            description: List of Agent IDs
            type: array
            items:
              type: string
              format: uuid
          style: form
          explode: true
      responses:
        '200':
          description: Successfully retrieved all Knowledge Bases belonging to an Agent
          content:
            application/json:
              schema:
                description: List of Knowledge Bases
                type: array
                items:
                  $ref: '#/components/schemas/KnowledgeBase'
                default: []
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    delete:
      tags:
        - Agents
      summary: Deletes all specified Knowledge Bases associated with the Agent
      description: >-
        This call deletes the specified Knowledge Bases associated with the 
        Agent. It also irreversibly clears all the embeddings in those specified
        Knowledge Bases. An additional files query parameter enables the user to
        delete the files associated with the knowledge base.
      operationId: delete_knowledge_bases
      parameters:
        - $ref: '#/components/parameters/IDListParam'
        - description: Deletes all files associated with the Knowledge Bases
          name: files
          in: query
          required: false
          schema:
            type: boolean
      responses:
        '204':
          $ref: '#/components/responses/DeletedResponse'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  '/agents/{id}/knowledge/bases/{secondary_id}/statuses':
    parameters:
      - $ref: '#/components/parameters/IDParam'
      - $ref: '#/components/parameters/SecondaryIDParam'
    put:
      tags:
        - Agents
      summary: Updates the current state of embeddings generated
      description: >-
        This API enables the user to update the Knowledge Base embeddings for 
        a given RAG config. The secondary_id parameter is the ID of the 
        KnowledgeBase while the ragConfig paramter indicates the RAGConfig ID
        to be updated
      operationId: update_embeddings
      parameters:
        - description: ID of the RAG Config to be updated
          name: ragConfig
          required: true
          schema:
            type: string
            format: uuid
          in: query
      requestBody:
        description: Current state of embeddings
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/State'
      responses:
        '204':
          $ref: '#/components/responses/UpdatedResponse'
        '400':
          $ref: '#/components/responses/InvalidParametersError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  '/agents/{id}/rags':
    parameters:
      - $ref: '#/components/parameters/IDParam'
    post:
      tags:
        - Agents
      summary: Adds new RAG pipeline configurations to an existing Agent
      description: >-
        This API enables the user to add the RAG pipeline configurations based
        on the supported RAG pipelines available. Users are able to add and 
        remove mutiple pipelines. After adding new RAG pipeline configurations, 
        users will need to trigger the new pipelines using the POST 
        /rags/{id}/pipelines endpoint to generate embeddings. As each Agent can 
        support multiple pipelines, these pipelines will be queried in the order
        provided and function as failovers in the event that one RAG service 
        goes down. There are several approaches to switching pipelines:
        
          1. By failing over. The failover feature also enables users to switch 
             pipelines by first adding a new pipeline before the existing one 
             and triggering it. While the new pipeline is running, the existing 
             queries will fail over to the existing one, allowing the Agent to 
             maintain functionality. When the new pipeline is complete, queries 
             will automatically be served from the new pipeline as it is 
             triggered first. The old pipeline can be cleared subsequently.
          2. In sequential order. As pipelines are queried in sequential order, 
             a user can add a new pipeline configuration after the current and 
             trigger it to run. However, the user must explicitly clear the 
             original pipeline in order to perform the switch.
      operationId: create_rag_configs
      requestBody:
        description: RAG pipeline configuration to be added
        required: true
        content:
          application/json:
            schema:
              description: List of supported RAG pipelines
              type: array
              items:
                $ref: '#/components/schemas/RAGConfig'
      responses:
        '204':
          $ref: '#/components/responses/UpdatedResponse'
        '400':
          $ref: '#/components/responses/InvalidParametersError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    get:
      tags:
        - Agents
      summary: Retrieves all RAG pipeline configurations associated with the Agent
      description: |-
        Returns a list of all RAG pipeline configurations associated with the Agent
      operationId: get_rag_configs
      responses:
        '200':
          description: Successfully retrieved all RAG pipeline configurations belonging to an Agent
          content:
            application/json:
              schema:
                description: List of RAG pipeline configurations
                type: array
                items:
                  $ref: '#/components/schemas/RAGConfig'
                default: []
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    delete:
      tags:
        - Agents
      summary: Deletes existing RAG pipeline configurations from an existing Agent
      description: >-
        This API enables the user to delete existing RAG pipeline configurations.
        When a RAG pipeline configuration is deleted, embeddings generated from
        the associated RAG pipeline are cleared.
      operationId: delete_rag_configs
      parameters:
        - $ref: '#/components/parameters/IDListParam'
      responses:
        '204':
          $ref: '#/components/responses/DeletedResponse'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  '/agents/{id}/rags/{secondary_id}/statuses':
    parameters:
      - $ref: '#/components/parameters/IDParam'
      - $ref: '#/components/parameters/SecondaryIDParam'
    put:
      tags:
        - Agents
      summary: Updates the current state of the RAG config
      description: >-
        This API enables the user to update the RAG config state
      operationId: update_rag_config
      requestBody:
        description: Current state of the RAG config
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/State'
      responses:
        '204':
          $ref: '#/components/responses/UpdatedResponse'
        '400':
          $ref: '#/components/responses/InvalidParametersError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  '/agents/{id}/sharing':
    parameters:
      - $ref: '#/components/parameters/IDParam'
    put:
      tags:
        - Agents
      summary: Updates the Agent's sharing details
      description: >-
        This API enables the user to update the Agent's sharing details, namely
        the url slug that is used to uniquely identify the Agent. If the slug 
        has already been taken, an error will be returned.
      operationId: update_agent_sharing
      requestBody:
        description: Agent's sharing details to be updated
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AgentSharingPUT'
      responses:
        '204':
          $ref: '#/components/responses/UpdatedResponse'
        '400':
          $ref: '#/components/responses/InvalidParametersError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '409':
          $ref: '#/components/responses/DuplicateEntryError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  '/agents/{id}/default/pipelines':
    parameters:
      - $ref: '#/components/parameters/IDParam'
    put:
      tags:
        - Agents
      summary: Updates the default RAG pipeline of an existing Agent
      description: >-
        This API enables the user to update the default RAG pipeline, setting
        the default RAG pipeline value to null will remove this functionality.
        Users are able to set a default pipeline to override the sequential 
        querying order. This default pipeline will always be triggered and the 
        failover logic will be ignored even if multiple pipelines are configured 
        and embeddings generated. This allows users to test new pipelines 
        while maintaining the older pipeline configuration to serve production. 
        After testing is complete, users can delete the older pipeline 
        configurations.
      operationId: update_agent_default_pipeline
      requestBody:
        description: Default RAG pipeline to be updated
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AgentRAGPipelinesPUT'
      responses:
        '204':
          $ref: '#/components/responses/UpdatedResponse'
        '400':
          $ref: '#/components/responses/InvalidParametersError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  '/agents/{id}/ownership':
    parameters:
      - $ref: '#/components/parameters/IDParam'
    put:
      tags:
        - Agents
      summary: Updates the ownership details of an existing Agent
      description: |-
        This API enables the user to update the ownership details of the Agent
      operationId: update_agent_ownership
      requestBody:
        description: Ownership details to be updated
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Ownership'
      responses:
        '204':
          $ref: '#/components/responses/UpdatedResponse'
        '400':
          $ref: '#/components/responses/InvalidParametersError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  '/agents/approvals':
    get:
      tags:
        - Agents
      summary: Retrieve all approval details for processing
      description: >-
        This is administrative feature for superusers to view all approvals
        that have been created. Supports querying by ID via the ids query 
        parameter.
      operationId: get_approvals
      parameters:
        - $ref: '#/components/parameters/IDListParam'
        - description: Indicates that all pending Agent Approvals will be returned
          name: pending
          in: query
          required: false
          schema:
            type: boolean
        - description: Indicates that approved Agents will be returned
          name: approved
          in: query
          required: false
          schema:
            type: boolean
        - description: Indicates that rejected Agents will be returned
          name: rejected
          in: query
          required: false
          schema:
            type: boolean
      responses:
        '200':
          description: Successfully retrieved all approvals
          content:
            application/json:
              schema:
                description: List of all approvals
                type: array
                items:
                  $ref: '#/components/schemas/AgentApproval'
                default: []
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  '/agents/approvals/{id}':
    parameters:
      - $ref: '#/components/parameters/IDParam'
    post:
      tags:
        - Agents
      summary: Submit approval details for processing
      description: >-
        Before the Agent is able to be published, it needs to be approved. This 
        set of endpoints models the Approval workflow, wherein an 
        email/notification is sent to the approver. Thereafter the Approver 
        must make a PUT API call to the /agents/approvals/{id} endpoint to 
        approve the request.
      operationId: create_approval
      responses:
        '204':
          $ref: '#/components/responses/UpdatedResponse'
        '400':
          $ref: '#/components/responses/InvalidParametersError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  '/agents/approvals/{id}/approves':
    parameters:
      - $ref: '#/components/parameters/IDParam'
    post:
      tags:
        - Agents
      summary: Approve Agent for release
      description: >-
        Only superusers or the approver specified is able to make a call 
        to this endpoint. After an Agent is in production, only then can they 
        set the visibility status of the Agent to wog or public.
      operationId: approve_approval
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AgentApprovalPUT"
      responses:
        '204':
          $ref: '#/components/responses/UpdatedResponse'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  '/agents/approvals/{id}/rejects':
    parameters:
      - $ref: '#/components/parameters/IDParam'
    post:
      tags:
        - Agents
      summary: Rejects an Agent release Approval
      description: >-
        Only superusers or the approver specified is able to make a call 
        to this endpoint. If the Agent is already in production status, then
        we will need to revoke the production status and set the visibility
        status of the Agent back to private.
      operationId: reject_approval
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AgentApprovalPUT"
      responses:
        '204':
          $ref: '#/components/responses/UpdatedResponse'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  # File Uploads
  # Functionality provided by atlas-archea
  # TODO: API to manage folders and download multiple files
  '/files':
    post:
      tags:
        - Files
      summary: Upload files to CMS
      description: >-
        This set of endpoints provides headless-CMS functionality to upload
        files. This is a generic set of endpoints for users to upload data 
        and associated metadata e.g. HTML sources, that can be utilised in 
        other parts of the system. The files can be organised and queried
        via folders. Only files that were successfully uploaded are returned.
        File versioning defaults to autoincrementing integers appended to the 
        filename, if users have more complex versioning requirements, the 
        version parameter is provided for the user to specify their own 
        versions. If two files with the same folder, file name and version are 
        uploaded, a duplicate error will be raised.
      operationId: upload_files
      requestBody:
        description: Files to be uploaded
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                files:
                  description: Files to be uploaded
                  type: array
                  items:
                    type: string
                    format: binary
                details:
                  description: >-
                    Additional details associated with the files, this is a
                    dictionary with the filename as details as values in the
                    stipulated structure below.
                  type: object
                  additionalProperties:
                    $ref: '#/components/schemas/FilePOST'
                  default: {}
              required:
                - files
            encoding:
              files:
                contentType: application/octet-stream, image/png, image/jpeg
            examples:
              html:
                description: HTML content uploaded
                value:
                  files:
                    - >-
                      <html></html>
                  details:
                    filename.html:
                      metadata:
                        type: tab
                        name: appraiserApplicationMainTab
              video:
                description: Video content uploaded
                value:
                  files:
                    - "videobytes"
                  details:
                    videofilename.mp4:
                      metadata:
                        type: video
              image:
                description: Thumbnail content uploaded
                value:
                  files:
                    - "imagebytes"
                  details:
                    videoimage.mp4:
                      metadata:
                        type: image
                        imageType: thumbnail
      responses:
        '201':
          description: Successfully created a list of Files
          content:
            application/json:
              schema:
                description: List of File details created
                type: array
                items:
                  $ref: '#/components/schemas/File'
                default: []
        '400':
          $ref: '#/components/responses/InvalidParametersError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '409':
          $ref: '#/components/responses/DuplicateEntryError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    get:
      tags:
        - Files
      summary: Downloads files owned by the requesting User
      description: >-
        Retrieves a zipped folder containing a list of all files owned by 
        the requesting User. Users are able to specify the files that they wish
        to download via the ids, files and folders query parameters. Users are
        also able to select specific version of the files that they wish to
        download via the names parameters.
      parameters:
        - $ref: '#/components/parameters/IDListParam'
        - description: Retrieve all files within specified folders
          name: folders
          in: query
          schema:
            type: string
          required: false
        - description: Retrieve specified files according to their versioned name
          name: files
          in: query
          schema:
            type: string
          required: false
      responses:
        '200':
          description: Successfully retrieved a list of files
          content:
            application/json:
              schema:
                description: List of files retrieved
                type: array
                items:
                  $ref: '#/components/schemas/File'
                default: []
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  '/files/{id}':
    parameters:
      - $ref: '#/components/parameters/IDParam'
    get:
      tags:
        - Files
      summary: Downloads a specific file
      description: >-
        Retrieves a specific file associated with the item. Users can
        retrieve a specific version of the file, but if the version is
        not provided or cannot be found, then by default the latest
        version will be returned.
      parameters:
        - description: Version of the file to be retrieved
          name: version
          in: query
          schema:
            type: string
          required: false
      operationId: get_file
      responses:
        '200':
          description: Successfully downloaded a file
          content:
            application/octet-stream:
              schema:
                type: string
                format: binary
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    put:
      tags:
        - Files
      summary: Updates a file
      description: >-
        Updates a file and refreshes the CDN such the latest version is served
      operationId: update_file
      requestBody:
        description: File properties to be modified
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/FilePUT'
            encoding:
              file:
                contentType: application/octet-stream, image/png, image/jpeg
            examples:
              image:
                description: Thumbnail content uploaded
                value:
                  file:
                    - "imagebytes"
                  metadata:
                    type: image
                    imageType: thumbnail
      responses:
        '204':
          $ref: '#/components/responses/UpdatedResponse'
        '400':
          $ref: '#/components/responses/InvalidParametersError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '409':
          $ref: '#/components/responses/DuplicateEntryError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    delete:
      tags:
        - Files
      summary: Deletes a file
      description: >-
        Deletes a file associated with the item. Users can specify the file
        version to be deleted via the version query parameter
      parameters:
        - description: Version of the file to be deleted
          name: version
          in: query
          schema:
            type: string
          required: false
      operationId: delete_file
      responses:
        '204':
          $ref: '#/components/responses/DeletedResponse'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  '/files/cdn/{id}':
    parameters:
      - $ref: '#/components/parameters/IDParam'
    get:
      tags:
        - Files
      summary: Downloads a specific file via CDN
      description: Retrieves a specific file associated with
                   the item by using a signed URL from the CDN
      operationId: get_file_by_cdn
      responses:
        '302':
          description: Redirects to the CDN signed URL
          headers:
            location:
              description: Signed URI to CDN where the client 
                           can download the file
              schema:
                type: string
                format: uri
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  '/files/details':
    parameters:
      - $ref: '#/components/parameters/IDParam'
    get:
      tags:
        - Files
      summary: Retrieves file details owned by the requesting User
      description: >-
        Retrieves all files owned by the requesting User. Users are able to 
        retrieve specific files via ids and folder queries. All file versions
        associated with the files will be returned
      operationId: get_info_files
      parameters:
        - $ref: '#/components/parameters/IDListParam'
        - description: Retrieve a list of all files within specified folders
          name: folders
          in: query
          schema:
            type: string
          required: false
        - description: Retrieve specified files according to their versioned name
          name: files
          in: query
          schema:
            type: string
          required: false
      responses:
        '200':
          description: Successfully retrieved a list of files
          content:
            application/json:
              schema:
                description: List of files retrieved
                type: array
                items:
                  $ref: '#/components/schemas/File'
                default: []
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  '/files/details/{id}':
    parameters:
      - $ref: '#/components/parameters/IDParam'
    get:
      tags:
        - Files
      summary: Retrieves the details of a specific file
      description: >-
        Retrieves all the details associated with a specific file
      operationId: get_info_file
      responses:
        '200':
          description: Successfully downloaded a file
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/File'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  # Chat APIs
  '/chats':
    post:
      tags:
        - Chats
      summary: Creates a new Chat with Agents
      description: |-
        A Chat describes a series of interactions with multiple Agents. When 
        interacting with the an LLM model, parameters are overridden in the 
        following order: AI Model < Agent < Chat, with Chat parameters taking 
        the highest priority. Chat interactions will be anonymised and logged 
        for audit purposes.
      operationId: create_multiagent_chat
      security:
        - AtlasAuth: []
        - AtlasAPIKey: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ChatPOST'
      responses:
        '201':
          $ref: '#/components/responses/CreatedResponse'
        '400':
          $ref: '#/components/responses/InvalidParametersError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    get:
      tags:
        - Chats
      summary: Retrieve a user's Chats
      description: >-
        Retrieves all the chats that a user has created, supports querying Chats
        via titles and filtering via agents.
      operationId: get_chats
      security:
        - AtlasAuth: []
        - AtlasAPIKey: []
      parameters:
        - description: Allows users to retrieve Chats associated with specified Agents
          name: agents
          in: query
          schema:
            type: array
            items:
              type: string
              format: uuid
          style: form
          explode: true
          required: false
        - description: Allows users to query text strings within Chat titles
          name: query
          in: query
          schema:
            type: string
          required: false
        - description: Allows users to retrieve Chats belonging to Agents that they own
          name: owner
          in: query
          schema:
            type: boolean
          required: false
        - description: Allows users to retrieve Chats belonging to Agents that they can edit
          name: editor
          in: query
          schema:
            type: boolean
          required: false
      responses:
        '200':
          description: Successfully retrieved a list of Chats
          content:
            application/json:
              schema:
                description: List of Chats
                type: array
                items:
                  $ref: '#/components/schemas/Chat'
                default: []
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    delete:
      tags:
        - Chats
      summary: Deletes multiple Chats
      security:
        - AtlasAuth: []
        - AtlasAPIKey: []
      description: |-
        This endpoint enables the user to delete multiple Chats in one API
        call. This call only returns a successful response if all the Chats
        have been deleted.
      operationId: delete_chats
      parameters:
        - $ref: '#/components/parameters/IDListParam'
      responses:
        '204':
          $ref: '#/components/responses/DeletedResponse'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  '/chats/{id}':
    parameters:
      - $ref: '#/components/parameters/IDParam'
    post:
      tags:
        - Chats
      summary: Creates a new Chat with a single Agent
      description: |-
        Creates a chat with a single Agent interacting with the an LLM model, 
        parameters are overridden in the following order: AI Model < Agent < 
        Chat, with Chat parameters taking the highest priority. Chat 
        interactions will be anonymised and logged for audit purposes.
      operationId: create_chat
      security:
        - AtlasAuth: []
        - AtlasAPIKey: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ChatPOST'
      responses:
        '201':
          $ref: '#/components/responses/CreatedResponse'
        '400':
          $ref: '#/components/responses/InvalidParametersError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    put:
      tags:
        - Chats
      summary: Updates the properties of a Chat
      security:
        - AtlasAuth: []
        - AtlasAPIKey: []
      description: |-
        Allows the user to customise parameters and properties of a Chat,
        thereby customising their experience
      operationId: update_chat
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ChatPUT'
      responses:
        '204':
          $ref: '#/components/responses/UpdatedResponse'
        '400':
          $ref: '#/components/responses/InvalidParametersError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    get:
      tags:
        - Chats
      summary: Retrieves the Chat History
      description: Retrieves the entire conversation history with the LLM
      operationId: get_chat
      security:
        - AtlasAuth: []
        - AtlasAPIKey: []
      responses:
        '200':
          description: Successfully retrieved a Chat
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Chat'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    delete:
      tags:
        - Chats
      summary: Deletes the Chat
      description: Deletes the entire conversation history with the LLM Model
      operationId: delete_chat
      security:
        - AtlasAuth: []
        - AtlasAPIKey: []
      responses:
        '204':
          $ref: '#/components/responses/DeletedResponse'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  '/chats/{id}/email':
    parameters:
      - $ref: '#/components/parameters/IDParam'
    get:
      tags:
        - Chats
      summary: Emails the entire conversation history to the User
      description: |-
        This enables users to send their conversation details between
        devices via email.
      operationId: get_chat_email
      security:
        - AtlasAuth: []
        - AtlasAPIKey: []
      responses:
        '202':
          description: Successfully processed email request
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  '/chats/{id}/messages':
    parameters:
      - $ref: '#/components/parameters/IDParam'
    post:
      tags:
        - Chats
      summary: Creates a new Chat Message
      description: |-
        This action sends a new Chat Message to the LLM and returns
        its response
      operationId: create_chat_message
      security:
        - AtlasAuth: []
        - AtlasAPIKey: []
      parameters:
        - name: streaming
          description: Indicates if streaming is to be used
          in: query
          required: false
          schema:
            type: boolean
            default: false
        - name: cloak
          description: Indicates if cloak is to be used to censure PII
          in: query
          required: false
          schema:
            type: boolean
            default: true
        - name: pipeline
          description: Indicates if a specific RAG pipeline is to be queried
          in: query
          required: false
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ChatMessagePOST'
            encoding:
              content:
                contentType: application/json, image/png, image/jpeg
      responses:
        '201':
          description: Successfully created a Chat Message
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChatMessage'
            text/event-stream:
              schema:
                oneOf:
                  - type: string
                    format: markdown
                  - $ref: '#/components/schemas/ChatMessage'
        '400':
          $ref: '#/components/responses/InvalidParametersError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '415':
          $ref: '#/components/responses/UnsupportedMediaTypeError'
        '422':
          $ref: '#/components/responses/InvalidCreationError'
        '429':
          $ref: '#/components/responses/RateLimitError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    get:
      tags:
        - Chats
      summary: Retrieves all Messages associated with a Chat
      description: Retrieves all associated Messages
      operationId: get_chat_messages
      security:
        - AtlasAuth: []
        - AtlasAPIKey: []
      responses:
        '200':
          description: Successfully retrieved all Chat Messages
          content:
            application/json:
              schema:
                description: List of Chat Messages
                type: array
                items:
                  $ref: '#/components/schemas/ChatMessage'
                default: []
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    delete:
      tags:
        - Chats
      summary: Deletes multiple Messages associated with a Chat
      description: |- 
        Deletes multiple Chat messages, this operation only returns
        a successful response if all of the Chat messages are 
        successfully deleted.
      operationId: delete_chat_messages
      security:
        - AtlasAuth: []
        - AtlasAPIKey: []
      parameters:
        - $ref: '#/components/parameters/IDListParam'
      responses:
        '204':
          $ref: '#/components/responses/DeletedResponse'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '422':
          $ref: '#/components/responses/InvalidDeletionError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  '/chats/{id}/messages/{secondary_id}':
    parameters:
      - $ref: '#/components/parameters/IDParam'
      - $ref: '#/components/parameters/SecondaryIDParam'
    put:
      tags:
        - Chats
      summary: Updates the properties of a Chat Message
      description: Enables users to pin or like a Chat Message
      operationId: update_chat_message
      security:
        - AtlasAuth: []
        - AtlasAPIKey: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ChatMessagePUT'
      responses:
        '204':
          $ref: '#/components/responses/UpdatedResponse'
        '400':
          $ref: '#/components/responses/InvalidParametersError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    get:
      tags:
        - Chats
      summary: Retrieves a Chat Message
      description: |-
        Retrieves a single Chat Message or a stream of the response 
        content as it is generated. This stream is powered via 
        Server-Sent Events.
      operationId: get_chat_message
      security:
        - AtlasAuth: []
        - AtlasAPIKey: []
      responses:
        '200':
          description: Successfully retrieved a Chat Message
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChatMessage'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    delete:
      tags:
        - Chats
      summary: Deletes a Chat Message
      description:
        Enables users to delete a Chat Messages from the conversation
      operationId: delete_chat_message
      security:
        - AtlasAuth: []
        - AtlasAPIKey: []
      responses:
        '204':
          $ref: '#/components/responses/DeletedResponse'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '422':
          $ref: '#/components/responses/InvalidDeletionError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  '/trackers':
    post:
      tags:
        - Trackers
      summary: Creates a new tracker
      description: >-
        Trackers allow users to track resource counts e.g. access and usage. 
        Trackers can only be incremented, and each time the tracker is 
        incremented, it stores the timestamp and details as an activity, 
        allowing users to retrieve traffic information. Trackers can be rotated,
        and if rotation is not selected, only the total value will be increased.
        This API allows users to create and increment the tracker by a specified 
        value, defaulting to 1. If the tracker already exists, then the value 
        will just be incremented.
      operationId: create_trackers
      parameters:
        - description: Enables rotation of the tracker
          name: rotation
          in: query
          required: false
          schema:
            type: boolean
        - description: ID of the tracker
          name: id
          in: query
          required: true
          schema:
            type: string
        - description: Value to increment the tracker by, defaults to 1
          name: value
          in: query
          required: false
          schema:
            oneOf:
              - type: number
                format: float32
              - type: integer
                format: int32
      requestBody:
        description: Additional metadata associated with the tracker
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TrackerPOST'
      responses:
        '201':
          description: Successfully created a tracker
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Tracker'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    get:
      tags:
        - Trackers
      summary: Retrieves all trackers visible to the user
      description: >-
        Allows administrative users to retrieve trackers. Users can utilise
        the query parameters to filter the IDs and resource type of the 
        trackers they wish to retrieve
      operationId: get_trackers
      parameters:
        - $ref: '#/components/parameters/IDListParam'
        - description: Resource types to filter the trackers by
          name: type
          in: query
          required: false
          schema:
            type: string
      responses:
        '200':
          description: Successfully retrieved a list of trackers
          content:
            application/json:
              schema:
                description: List of Trackers
                type: array
                items:
                  $ref: '#/components/schemas/Tracker'
                default: []
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    delete:
      tags:
        - Trackers
      summary: Deletes trackers
      description: >-
        Allows administrative users to delete trackers. Users can utilise the
        activity query parameter to indicate that all the activity logs should
        also be purged.
      operationId: delete_trackers
      parameters:
        - $ref: '#/components/parameters/IDListParam'
      responses:
        '204':
          $ref: '#/components/responses/DeletedResponse'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  '/trackers/messages/users':
    get:
      tags:
        - Trackers
      summary: Retrieves LLM message count Trackers associated with visible users
      description: >-
        Users are able to specify other users up to their permitted level 
        i.e. basic users are only able to view their own resource count 
        trackers, agency admin users are able to view all the users within 
        their ministry and superadmin users are able to view all the users 
        within the system.
      operationId: get_user_message_counts
      parameters:
        - $ref: '#/components/parameters/IDListParam'
      responses:
        '200':
          description: Successfully retrieved a list of LLM message count trackers for specified users
          content:
            application/json:
              schema:
                description: List of message count Trackers
                type: array
                items:
                  $ref: '#/components/schemas/Tracker'
                default: []
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  '/trackers/messages/agencies':
    get:
      tags:
        - Trackers
      summary: Retrieves LLM message counters associated with agencies
      description: >-
        Returns an aggregated view of the LLM message counter associated with
        an agency. Basic users will not be able to access this, Agency Admin
        users will only be able to retrieve the LLM message counter associated 
        to their home Agency, only superadmins will be able to retrieve a list
        of all message counters
      operationId: get_agency_message_counts
      parameters:
        - $ref: '#/components/parameters/IDListParam'
      responses:
        '200':
          description: Successfully retrieved a list of message counters for specified agencies
          content:
            application/json:
              schema:
                description: List of message counters
                type: array
                items:
                  $ref: '#/components/schemas/Tracker'
                default: []
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  '/rags/{id}/pipelines':
    parameters:
      - $ref: '#/components/parameters/IDParam'
    post:
      tags:
        - RAG
      summary: Triggers a RAG pipeline associated with a specific Agent
      description: >-
        Triggers the Retrieval Augmented Generation (RAG) pipeline 
        configurations encapsulated as a Agent config. The pipelines 
        will run asynchronously and update their status in the background.
        When the pipelines are complete or if any errors occur during 
        processing, a completion email/notification will be sent out.
        Users can specify which documents and pipelines they wish to 
        regenerate their embeddings with via the run configuration in the
        body. After each pipeline is run, users can query the latest run 
        status of their RAG pipeline via the /rags/{id}/pipeline/status 
        endpoint. If a specific pipeline or set of documents fails, then
        users can retry pipeline execution with this endpoint using the 
        specific pipelines or document set.
      operationId: create_rag_pipelines
      security:
        - AtlasAuth: []
        - AtlasAPIKey: []
      requestBody:
        description: List of RAG pipelines to be triggered
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RAGPipelinePOST'
      responses:
        '201':
          description: Successfully triggered RAG pipeline
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RAGPipeline'
        '400':
          $ref: '#/components/responses/InvalidParametersError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  '/rags/{id}/pipelines/status':
    parameters:
      - $ref: '#/components/parameters/IDParam'
    get:
      tags:
        - RAG
      security:
        - AtlasAPIKey: []
      summary: Retrieves the latest pipeline status
      description: >-
        Allows users to retrieve the latest RAG pipeline run configuration 
        status of an Agent
      operationId: get_rag_pipeline_status
      responses:
        '204':
          $ref: '#/components/responses/UpdatedResponse'
        '400':
          $ref: '#/components/responses/InvalidParametersError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  # Notifications
  /events:
    get:
      tags:
        - Notifications
      summary: Retrieves all Events generated by the system
      description: >-
        This retrieves all notification events created by the system. The list
        of notification events are specific to each user. The system will 
        automatically exclude events after a certain time. This is an 
        authorised call
      operationId: get_events
      security:
        - AtlasAuth: []
        - AtlasAPIKey: []
      responses:
        '200':
          description: Successfully retrieve Events
          content:
            application/json:
              schema:
                description: A list of Events
                type: array
                items:
                  $ref: '#/components/schemas/Event'
                default: []
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /events/{id}:
    parameters:
      - $ref: '#/components/parameters/IDParam'
    get:
      tags:
        - Notifications
      summary: Retrieves a specific Event
      description: >-
        This call allows users to retrieve a specific Event based on an
        ID reference. This is useful in the case where users retrieve a 
        notification via webhook and wish to reference the Event 
        programmatically. Users can only retrieve an Event visible to them
      operationId: get_event
      security:
        - AtlasAuth: []
        - AtlasAPIKey: []
      responses:
        '200':
          description: Successfully retrieved Event/Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Event'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    delete:
      tags:
        - Notifications
      summary: Clears an Event from the notification list
      description: >-
        Once an event is deleted, it can no longer be retrieved
      operationId: delete_event
      security:
        - AtlasAuth: []
        - AtlasAPIKey: []
      responses:
        '204':
          description: Successfully cleared Event
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
      x-version: '1.0'
  /webhooks:
    post:
      tags:
        - Notifications
      summary: Creates a new Webhook Host to push event notifications to
      description: >-
        Webhook Hosts are REST endpoints that AI Agents will push event 
        notifications to. The host URI needs to be a POST endpoint, other REST
        methods are not supported. Developers can register webhooks and use 
        them to retrieve notifications on background tasks such as RAG pipeline
        statuses.
      operationId: create_webhook
      security:
        - AtlasAuth: []
        - AtlasAPIKey: []
      requestBody:
        description: Parameters to create Webhook Hosts
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/WebhookHostPOST'
      responses:
        '201':
          $ref: '#/components/responses/CreatedResponse'
        '400':
          $ref: '#/components/responses/InvalidParametersError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    get:
      tags:
        - Notifications
      summary: Retrieves all Webhook Hosts
      description: >-
        Only Webhook hosts visible to the user will be returned
      operationId: get_webhooks
      responses:
        '200':
          description: Names of all existing Event Hosts
          content:
            application/json:
              schema:
                description: List of all existing Event Hosts
                type: array
                items:
                  $ref: '#/components/schemas/WebhookHost'
                default: []
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /webhooks/{id}:
    parameters:
      - $ref: '#/components/parameters/IDParam'
    put:
      tags:
        - Notifications
      summary: Updates an existing Event Host details
      description: This is an authorised call
      operationId: update_webhook
      requestBody:
        description: Parameters to update an Event Host
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/WebhookHostPUT'
      responses:
        '204':
          description: Event Host successfully updated
        '400':
          $ref: '#/components/responses/InvalidParametersError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    get:
      tags:
        - Notifications
      summary: Retrieves the details of an existing Webhook Host
      description: Users can only retrieve Webhook Hosts visible to themselves
      operationId: get_webhook
      responses:
        '200':
          description: Webhook Host successfully retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WebhookHost'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    delete:
      tags:
        - Notifications
      summary: Deletes an existing Webhook Host
      description: This is an authorised call
      operationId: delete_webhook
      responses:
        '204':
          $ref: '#/components/responses/DeletedResponse'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionsError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'

security:
  - AtlasAuth: []

components:
  schemas:

    # Common Schemas
    APIError:
      description: Generic schema for expressing API Errors
      type: object
      properties:
        code:
          description: API Error code associated with the error
          type: integer
          format: int32
        message:
          description: Error message associated with the error
          type: string
        request:
          description: Request details associated with the error
          type: object
        details:
          description: Other details associated with the error
          type: object
      required:
        - code
        - message
    Meta:
      description: Descriptive metadata associated with a resource
      type: object
      readOnly: true
      properties:
        resourceType:
          description: Type of resource, differs for each implementation
          type: string
          default: 'default'
          readOnly: true
        created:
          description: Creation timestamp of the resource
          type: string
          format: date-time
          nullable: true
          default: null
          readOnly: true
        lastModified:
          description: Last modified timestamp of the resource
          type: string
          format: date-time
          nullable: true
          default: null
          readOnly: true
        lastModifiedUser:
          description: Last modified user of the resource
          type: string
          format: uuid
          nullable: true
          default: null
          readOnly: true
        location:
          description: URI pointing to the location of the resource
          type: string
          format: url
          nullable: true
          default: null
          readOnly: true
        owner:
          description: Owner of the resource
          type: string
          format: uuid
          nullable: true
          default: null
          readOnly: true
        ownerType:
          description: Type of the Owner of the resource
          type: string
          nullable: true
          default: null
          readOnly: true
        version:
          description: Version of the resource
          anyOf:
            - type: number
            - type: string
          nullable: true
          default: null
          readOnly: true
        deleted:
          description: Deleted timestamp of the resource
          type: string
          format: date-time
          nullable: true
          default: null
          readOnly: true
        deletedUser:
          description: Deleting user of the resource
          type: string
          format: uuid
          nullable: true
          default: null
          readOnly: true
        archived:
          description: Archived timestamp of the resource
          type: string
          format: date-time
          nullable: true
          default: null
          readOnly: true
        archivedUser:
          description: Archiving user of the resource
          type: string
          format: uuid
          nullable: true
          default: null
          readOnly: true
      required:
        - resourceType
        - created
        - lastModified
        - lastModifiedUser
        - location
        - owner
        - ownerType
        - version
        - deleted
        - deletedUser
        - archived
        - archivedUser
    ScopeStr:
      description: Representation of a Scope string
      type: string
      pattern: >- 
        (?<product>(?<productName>[A-Za-z0-9_]+)-(?<semVer>[A-Za-z0-9]*\.?[A-Za-z0-9]*\.?[A-Za-z0-9]*.(a|alpha|b|beta|rc\.\d*)?):)?(?<resource>[A-Za-z0-9_]+(?<fields>[A-Za-z0-9_\.\*,])*(?<attributes>-[A-Za-z0-9]+)*)(?<accessLevel>:(create_one|create_many|create|read_one|read_many|read|update_one|update_many|update|delete_one|delete_many|delete|allow|deny|,)*)?
    ScopeList:
      description: List of Scope strings
      type: array
      items:
        $ref: '#/components/schemas/ScopeStr'
      default: []
    VisibilityLevel:
      type: string
      enum:
        - private
        - wog
        - public
      description: |-
        Visibility of the resource
        private = Resource only visible to the users in the access list
        wog = Resource is visible to WOG, all registered users can 
              view the resource
        public = Resource is visible to public, anyone can view the resource
    AccessGroupType:
      type: string
      enum:
        - user
        - group
      description: >-
        Type of user/group granted access to the resource

        user = A user has been granted access to the resource
        group = A group has been granted access to the resource
    AccessRole:
      description: User access role to the resource
      type: object
      properties:
        id:
          description: >-
            ID of user or group granted access to the resource, 
            this can be a domain, agency ID, UUID or an Email address
          type: string
        type:
          $ref: '#/components/schemas/AccessGroupType'
      required:
        - id
        - type
    Ownership:
      description: Ownership details of the resource
      type: object
      nullable: true
      properties:
        resourceKey:
          description: Resource permissions key
          type: string
          readOnly: true
        visibility:
          $ref: '#/components/schemas/VisibilityLevel'
        access:
          description: Access permissions granted to the resource
          type: object
          properties:
            owner:
              description: >-
                User/Group is able to update ownership rights, edit, use, delete and view the resource
              type: array
              items:
                $ref: '#/components/schemas/AccessRole'
              default: []
            admin:
              description: >-
                User/Group is able to update ownership rights, edit, use and view the resource
              type: array
              items:
                $ref: '#/components/schemas/AccessRole'
              default: []
            editor:
              description: >- 
                User/Group is able to edit, use and view the resource
              type: array
              items:
                $ref: '#/components/schemas/AccessRole'
              default: []
            user:
              description: User/Group is able to use and view the resource
              type: array
              items:
                $ref: '#/components/schemas/AccessRole'
              default: []
            viewer:
              description: User/Group is able to view the resource
              type: array
              items:
                $ref: '#/components/schemas/AccessRole'
              default: []
          required:
            - owner
            - admin
            - editor
            - user
            - viewer
      required:
        - resourceKey
        - visibility
        - access
    File:
      description: Generic representation of an downloadable file
      type: object
      properties:
        id:
          description: ID of the file
          type: string
          format: uuid
          readOnly: true
        name:
          description: Filename of the file
          type: string
        folder:
          description: Folder of the file
          type: string
          default: '/'
        versions:
          description: Stores all versions of the file
          oneOf:
            - type: integer
              format: int32
            - type: string
        url:
          description: Public URL of the file
          type: string
          format: url
          nullable: true
        fullPath:
          description: Full virtual path to the latest version
          type: string
        metadata:
          description: Additional metadata associated with the content
          type: object
          additionalProperties: true
        meta:
          $ref: '#/components/schemas/Meta'
        ownership:
          $ref: '#/components/schemas/Ownership'
      required:
        - id
        - name
        - folder
        - version
        - url
        - fullPath
        - metadata
        - ownership
        - meta
    FilePOST:
      description: POST request body of a File
      type: object
      properties:
        version:
          description: >-
            Version of the file, defaults to 1
          type: string
          oneOf:
            - type: integer
              format: int32
            - type: string
          default: 1
        folder:
          description: Virtual folder containing the file
          type: string
          default: "/"
        ownership:
          $ref: '#/components/schemas/Ownership'
        metadata:
          description: Metadata associated with the file
          type: object
          additionalProperties: true
          default: {}
    FilePUT:
      description: PUT request body of a File
      type: object
      properties:
        file:
          description: File to be uploaded
          type: string
          format: binary
        version:
          description: Version of the file
          oneOf:
            - type: integer
              format: int32
            - type: string
        metadata:
          description: Metadata associated with the file
          type: object
          additionalProperties: true
      required:
        - file
    AtlasComponentTypes:
      type: string
      enum:
        - dropdown
        - radio
        - tag
        - user
        - text
        - textarea
        - richtext
        - number
        - switch
        - checkbox
        - uploader
        - list
        - object
        - layout
      description: >-
        Type of Atlas Component
        
        dropdown = Dropdown component
        radio = Radio component
        tag = Tag component
        user = User component
        text = Text component
        textarea = Text Area component
        richtext = Rich Text component
        number = Number component
        switch = Switch component
        checkbox = Checkbox component
        uploader = Upload component
        list = List component
        object = Object component
        layout = Layout component
    AtlasComponent:
      description: Representation of a dynamic UI component
      type: object
      properties:
        id:
          description: UUID of the Atlas Component
          type: string
          format: uuid
          readOnly: true
        type:
          $ref: '#/components/schemas/AtlasComponentTypes'
        name:
          description: Internal key value of the Atlas Component
          type: string
        title:
          description: Title of the Atlas Component
          type: string
          nullable: true
          default: null
        description:
          description: Description of the Atlas Component
          type: string
          nullable: true
          default: null
        placeholder:
          description: Placeholder value of the Atlas Component
          type: string
          nullable: true
          default: null
        readOnly:
          description: Indicates if the Atlas Component is read only
          type: boolean
          nullable: true
          default: false
        styles:
          description: Styles properties for the Atlas Component
          type: object
          nullable: true
          default: {}
          additionalProperties: true
      additionalProperties: true
      required:
        - id
        - type
        - name
        - title
        - description
        - placeholder
        - readOnly
        - styles
    DropdownComponent:
      allOf:
        - $ref: '#/components/schemas/AtlasComponent'
        - description: Dropdown specific component values
          type: object
          properties:
            options:
              description: Dropdown options
              type: array
              items:
                type: string
              default: []
            searchable:
              description: Indicates if the dropdown list is searchable
              type: boolean
              default: false
            defaultValue:
              description: Default value of the Dropdown component
              type: string
              nullable: true
              default: null
          required:
            - options
            - searchable
            - defaultValue
    RadioComponent:
      allOf:
        - $ref: '#/components/schemas/AtlasComponent'
        - description: Radio specific component values
          type: object
          properties:
            options:
              description: Dropdown options
              type: array
              items:
                type: string
              default: []
            defaultValue:
              description: Default value of the Radio component
              type: string
              nullable: true
              default: null
          required:
            - options
            - defaultValue
    TagComponent:
      allOf:
        - $ref: '#/components/schemas/AtlasComponent'
        - description: Tag specific component values
          type: object
          properties:
            options:
              description: Dropdown options
              type: array
              items:
                type: string
              default: []
            allowCustom:
              description: Indicates if custom tags are to be supported
              type: boolean
              default: false
            defaultValue:
              description: Default value of the Tag component
              type: string
              nullable: true
              default: null
          required:
            - options
            - allowCustom
            - defaultValue
    UserComponent:
      allOf:
        - $ref: '#/components/schemas/AtlasComponent'
        - description: User specific component values
          type: object
          properties:
            defaultValue:
              description: Default value of the User component
              type: string
              nullable: true
              default: null
          required:
            - defaultValue
    TextComponent:
      allOf:
        - $ref: '#/components/schemas/AtlasComponent'
        - description: Text specific component values
          type: object
          properties:
            maxLength:
              description: Maximum allowable length of the Text component
              type: number
              format: int32
              nullable: true
              minimum: 0
              default: null
            defaultValue:
              description: Default value of the Text component
              type: string
              nullable: true
              default: null
          required:
            - maxLength
            - defaultValue
    NumberComponent:
      allOf:
        - $ref: '#/components/schemas/AtlasComponent'
        - description: Number specific component values
          type: object
          properties:
            min:
              description: Minimum value of the Number
              anyOf:
                - type: integer
                  format: int32
                - type: number
                  format: float32
              nullable: true
              default: null
            max:
              description: Maximum value of the Number
              anyOf:
                - type: integer
                  format: int32
                - type: number
                  format: float32
              nullable: true
              default: null
            step:
              description: Step increment of the Number
              anyOf:
                - type: integer
                  format: int32
                - type: number
                  format: float32
              nullable: true
              default: null
              minimum: 0
            defaultValue:
              description: Default value of the Number component
              anyOf:
                - type: integer
                  format: int32
                - type: number
                  format: float32
              nullable: true
              default: null
          required:
            - min
            - max
            - step
            - defaultValue
    SwitchComponent:
      allOf:
        - $ref: '#/components/schemas/AtlasComponent'
        - description: Switch specific component values
          type: object
          properties:
            defaultValue:
              description: Default value of the Switch component
              type: boolean
              nullable: true
              default: null
          required:
            - defaultValue
    CheckboxComponent:
      allOf:
        - $ref: '#/components/schemas/AtlasComponent'
        - description: Checkbox specific component values
          type: object
          properties:
            defaultValue:
              description: Default value of the Checkbox component
              type: boolean
              nullable: true
              default: null
            label:
              description: Label of the Checkbox component
              type: string
              default: ''
          required:
            - defaultValue
            - label
    UploadComponent:
      allOf:
        - $ref: '#/components/schemas/AtlasComponent'
        - description: Upload specific component values
          type: object
          properties:
            metadata:
              description: Metadata associated with the Upload component
              type: object
              additionalProperties: true
              default: {}
            defaultValue:
              description: Default value of the Upload component
              type: string
              nullable: true
              default: null
          required:
            - metadata
            - defaultValue
    ListComponent:
      allOf:
        - $ref: '#/components/schemas/AtlasComponent'
        - description: List specific component values
          type: object
          properties:
            min:
              description: Minimum value of the List
              type: integer
              format: int32
              nullable: true
              default: null
            max:
              description: Maximum value of the List
              type: integer
              format: int32
              nullable: true
              default: null
            components:
              description: Associated components
              type: array
              items:
                $ref: '#/components/schemas/AtlasComponents'
            defaultValue:
              description: Default value of the List component
              type: array
              items: {}
              nullable: true
              default: null
          required:
            - min
            - max
            - components
            - defaultValue
    ObjectComponent:
      allOf:
        - $ref: '#/components/schemas/AtlasComponent'
        - description: Object specific component values
          type: object
          properties:
            components:
              description: Associated components
              type: array
              items:
                $ref: '#/components/schemas/AtlasComponents'
            defaultValue:
              description: Default value of the List component
              type: object
              additionalProperties: true
              nullable: true
              default: null
          required:
            - components
            - defaultValue
    LayoutComponent:
      allOf:
        - $ref: '#/components/schemas/AtlasComponent'
        - description: Layout specific component values
          type: object
          properties:
            components:
              description: Associated components
              type: array
              items:
                $ref: '#/components/schemas/AtlasComponents'
            grid:
              description: Grid layout of the components
              type: array
              items:
                type: array
                items:
                  type: integer
                  format: int32
            defaultValue:
              description: Default value of the List component
              type: object
              additionalProperties: true
              nullable: true
              default: null
          required:
            - components
            - defaultValue
    AtlasComponents:
      oneOf:
        - $ref: '#/components/schemas/DropdownComponent'
        - $ref: '#/components/schemas/RadioComponent'
        - $ref: '#/components/schemas/TagComponent'
        - $ref: '#/components/schemas/UserComponent'
        - $ref: '#/components/schemas/TextComponent'
        - $ref: '#/components/schemas/NumberComponent'
        - $ref: '#/components/schemas/SwitchComponent'
        - $ref: '#/components/schemas/CheckboxComponent'
        - $ref: '#/components/schemas/UploadComponent'
        - $ref: '#/components/schemas/ListComponent'
        - $ref: '#/components/schemas/ObjectComponent'
        - $ref: '#/components/schemas/LayoutComponent'
      discriminator:
        propertyName: type
        mapping:
          dropdown: '#/components/schemas/DropdownComponent'
          radio: '#/components/schemas/RadioComponent'
          tag: '#/components/schemas/TagComponent'
          user: '#/components/schemas/UserComponent'
          text: '#/components/schemas/TextComponent'
          textarea: '#/components/schemas/TextComponent'
          richtext: '#/components/schemas/TextComponent'
          number: '#/components/schemas/NumberComponent'
          switch: '#/components/schemas/SwitchComponent'
          checkbox: '#/components/schemas/CheckboxComponent'
          uploader: '#/components/schemas/UploadComponent'
          list: '#/components/schemas/ListComponent'
          object: '#/components/schemas/ObjectComponent'
          layout: '#/components/schemas/LayoutComponent'
    AtlasParam:
      description: Representation of a dynamic configurable parameter field
      type: object
      properties:
        name:
          description: Display name of the Parameter
          type: string
        description:
          description: Brief description of the Parameter
          type: string
          default: ''
        key:
          description: Internal key of the Parameter
          type: string
        default:
          description: Default parameter value
          nullable: true
          default: null
        required:
          description: Indicates if the Parameter is required
          type: boolean
          default: false
        schema:
          description: Json schema structure to validate the Parameter against
          type: object
          additionalProperties: true
          default: {}
        tags:
          description: Tags associated with the Parameter
          type: array
          items:
            type: string
          default: []
        componentConfig:
          description: UI components to render the Param configuration form with
          anyOf:
            - $ref: '#/components/schemas/AtlasComponents'
            - description: List of Atlas Components
              type: array
              items:
                $ref: '#/components/schemas/AtlasComponents'
          nullable: true
          default: null
      required:
        - name
        - description
        - key
        - default
        - schema
        - required
        - tags
        - componentConfig

    # States
    ExecutionState:
      type: string
      enum:
        - pending
        - scheduled
        - running
        - cancelling
        - cancelled
        - completed
        - failed
        - crashed
      description: >-
        Generic states

        pending = The task has been created but not scheduled for execution
        scheduled = The task has been scheduled for execution
        running = The task is currently executing
        cancelling = The task has been cancelled but clean up has not been completed
        cancelled = The task has been cancelled
        completed = The task has been completed
        failed = The task has failed because of a software issue
        crashed = The task failed because of an infrastructure issue
    State:
      description: Generic representation of the current State that the task is in
      type: object
      properties:
        state:
          $ref: "#/components/schemas/ExecutionState"
        timestamp:
          description: Timestamp when resource transition into this status
          type: string
          format: date-time
        details:
          description: Additional details associated with the state transition
          type: object
          additionalProperties: true
          default: {}
      required:
        - state
        - timestamp
        - details

    # AI Models
    # AI Model schemas
    AIModelID:
      description: LLM Model ID to interact with
      type: string
      format: llm_id
      pattern: '^[a-zA-Z0-9-_\.]+~[a-zA-Z0-9-_\.]+$'
      example: "azure~gpt-4"
    SecurityClassificationType:
      type: string
      enum:
        - public
        - restricted
        - confidential
        - secret
      description: |-
        Security classification of Data

        public = the information if lost or modified will not cause 
                 signification impact to the organization
        restricted = information that if disclosed would not cause adverse 
                     impact to an organization
        confidential = information that if disclosed would cause significant    
                       impact to an organization
        secret = information that if disclosed would cause adverse impact to 
                 an organization
    AIModelType:
      type: string
      enum:
        - text_gen
        - image_gen
        - multimodal
        - embeddings
      description: |-
        Classes of AI
        - text_gen = Generative text models
        - image_gen = Text to image models
        - multimodal = Multimodal models
        - embeddings = Text embedding models
    AIModel:
      description: Representation of an AI Model and its associated configuration
      type: object
      properties:
        id:
          $ref: '#/components/schemas/AIModelID'
        name:
          description: Name of the LLM Model
          type: string
          maxLength: 200
        description:
          description: Brief description of the LLM Model
          type: string
          maxLength: 500
        type:
          $ref: '#/components/schemas/AIModelType'
        securityClassification:
          $ref: '#/components/schemas/SecurityClassificationType'
        params:
          description: Default AI Parameters for the Model
          type: object
          additionalProperties: true
        definitions:
          description: AI Parameters for the Model
          type: object
          additionalProperties:
            $ref: '#/components/schemas/AtlasParam'
        specs:
          description: AI Model Specifications
          type: object
          additionalProperties:
            $ref: '#/components/schemas/AtlasParam'
        internal:
          description: Indicates if the model is provided internally by GovTech
          type: boolean
          default: false
      additionalProperties: true
      required:
        - id
        - name
        - description
        - type
        - securityClassification
        - specs
        - params
        - internal

    # Knowledge Base Schemas
    DataSourceType:
      type: string
      enum:
        - file
        - stream
        - govkb
        - website
      description: |-
        Types of supported data sources:
        
        file = Text, image and other static files
        stream = Video and audio stream
        govkb = Gov KB virtual filesystem
        website = Website to be scraped
    DataSource:
      description: Representation of a Data Source
      type: object
      properties:
        name:
          description: Name of the Data Source
          type: string
        description:
          description: Brief description of the Data Source
          type: string
        type:
          $ref: '#/components/schemas/DataSourceType'
        content:
          description: Data content
          anyOf:
            - type: string
              format: uuid
            - type: string
              format: path
            - type: string
              format: url
        metadata:
          description: >-
            Additional user metadata to be appended together with 
            the Data Source
          type: object
          additionalProperties: true
      required:
        - type
        - content
    Embeddings:
      description: >-
        Embeddings and associated data generated via the embeddings process
      type: object
      properties:
        metadata:
          description: Pipeline generated metadata associated with the embeddings
          type: object
          additionalProperties: true
        current:
          $ref: "#/components/schemas/State"
      readOnly: true
      additionalProperties: true
      required:
        - metadata
        - current
    KnowledgeBase:
      description: Knowledge Base that represents data uploaded with embeddings generated
      type: object
      allOf:
        - $ref: '#/components/schemas/DataSource'
        - description: Embeddings information generated
          type: object
          properties:
            id:
              description: ID of the Knowledge Base
              type: string
              format: uuid
              readOnly: true
            storage:
              description: >-
                References to the storage locations of the actual files
              type: object
              readOnly: true
              properties:
                type:
                  description: Storage type
                  type: string
                  enum:
                    - cms
                    - govkb
                location:
                  description: URL link to the Storage files
                  type: string
                  format: url
                value:
                  description: ID of the Storage file
                  type: string
              additionalProperties: true
              required:
                - type
                - location
                - value
            embeddings:
              description: Embeddings details for each pipeline type
              type: object
              additionalProperties:
                $ref: '#/components/schemas/Embeddings'
              default: {}
            timestamp:
              description: Timestamp when Knowledge Base was created
              type: string
              format: date-time
          additionalProperties: true
          required:
            - id
            - storage
            - embeddings
            - timestamp
    RAGConfig:
      description: RAG pipelines and configuration and associated with a Agent
      type: object
      properties:
        id:
          description: ID of the Knowledge Base
          type: string
          format: uuid
          readOnly: true
        type:
          description: >-
            Supported RAG pipeline to be used for embedding documents
          type: string
        config:
          description: Agent RAG pipeline config
          additionalProperties: true
          default: {}
        current:
          $ref: "#/components/schemas/State"
        previous:
          $ref: "#/components/schemas/State"
          nullable: true
          default: null
        timestamp:
          description: Timestamp when Agent RAG pipeline config was created
          type: string
          format: date-time
      additionalProperties: true
      required:
        - id
        - type
        - config
        - current
        - previous
        - timestamp

    # Agent Schemas
    DeploymentState:
      type: string
      enum:
        - alpha
        - beta
        - pending
        - production
      description: >-
        Various deployment state types of an Agent
        
        alpha = Agent is in alpha testing state
        beta = Agent is in beta testing state
        pending = Agent is pending approval for production
        production = Agent has been approved for production
    AgentSharing:
      description: Sharing details of the Agent
      type: object
      properties:
        urlPath:
          description: >-
            URL path fragment of the Agent, should be unique, defaults to 
            autogenerated string
          type: string
        publicUrl:
          description: Public URL to the Agent, based on urlPath
          type: string
          format: url
          readOnly: true
        apiUrl:
          description: API endpoint to the Agent, based on urlPath
          type: string
          format: url
          readOnly: true
        apiKeys:
          description: API Keys associated with the Agent
          type: array
          items:
            type: string
            format: uuid
          default: []
          readOnly: true
      required:
        - urlPath
        - publicUrl
        - apiUrl
        - apiKeys
    AgentTemplate:
      description: Template call details
      type: object
      properties:
        title:
          description: Title of the template
          type: string
        template:
          description: Template question string
          type: string
      required:
        - title
        - template
    AgentChatConfig:
      description: Configurable chat parameters
      type: object
      properties:
        userPrompt:
          $ref: '#/components/schemas/PromptTemplate'
        systemPrompt:
          $ref: '#/components/schemas/PromptTemplate'
        params:
          description: |-
            Parameter dictionary for overriding defaults prescribed by the AI Model
          type: object
          additionalProperties: true
          default: {}
          example:
            temperature: 0.7
        properties:
          description: Additional business logic details associated with the interaction
          type: object
          additionalProperties: true
          default: {}
        model:
          $ref: '#/components/schemas/AIModelID'
      required:
       - systemPrompt
       - params
       - properties
       - model
    AgentReleaseState:
      description: Represents the release status of the Agent
      readOnly: true
      type: object
      properties:
        state:
          $ref: '#/components/schemas/DeploymentState'
        created:
          description: Creation timestamp
          type: string
          format: date-time
          nullable: true
          default: null
          readOnly: true
        lastModified:
          description: Last modified timestamp
          type: string
          format: date-time
          nullable: true
          default: null
          readOnly: true
        lastModifiedUser:
          description: ID of the person who last modified the Approval
          type: string
          format: uuid
          nullable: true
          default: null
          readOnly: true
        denied:
          description: Indicates if the Approval has been denied
          type: boolean
          nullable: true
          default: null
          readOnly: true
        comments:
          description: Additional comments appended to the Agent
          type: array
          items:
            description: Comment details
            type: object
            properties:
              user:
                description: User who left the comment
                type: string
                format: uuid
              comment:
                description: Comment details
                type: string
              timestamp:
                description: Timestamp comment was left
                type: string
                format: date-time
            required:
              - user
              - comment
              - timestamp
          default: []
      additionalProperties: true
      required:
        - state
        - created
        - lastModified
        - lastModifiedUser
        - denied
        - timestamp
        - comments
    Agent:
      description: Representation of a Agent
      type: object
      properties:
        id:
          description: Unique ID of the Agent
          type: string
          format: uuid
          readOnly: true
        name:
          description: Name of the Agent
          type: string
        description:
          description: Brief description of the Agent
          type: string
        featured:
          description: Indicates if the Agent is a featured Agent
          type: boolean
          readOnly: true
        clone:
          description: ID of the original Agent cloned from
          type: string
          format: uuid
          readOnly: true
          nullable: true
          default: null
        sharing:
          $ref: '#/components/schemas/AgentSharing'
        ownership:
          $ref: '#/components/schemas/Ownership'
        files:
          description: Non-embedded files associated with the Agent
          type: array
          items:
            type: string
            format: uuid
          default: []
        agency:
          description: Agency associated with the Agent
          type: string
        welcomeMessage:
          description: Welcome message the Agent will display when a new chat is created
          type: string
          default: "Hello! I am your assistant. How can I help you?"
        templates:
          description: Default templates to use with the Agent
          type: array
          items:
            $ref: '#/components/schemas/AgentTemplate'
          default: []
        releaseState:
          $ref: '#/components/schemas/AgentReleaseState'
        knowledgeBases:
          description: Knowledge Bases associated with Agent
          type: array
          items:
            type: string
            format: uuid
          default: []
        defaultPipeline:
          description: Default RAG pipeline to be used
          type: string
          nullable: true
          default: null
        rags:
          description: List of supported RAG pipelines
          type: array
          items:
            type: string
            format: uuid
          default: []
        chat:
          $ref: '#/components/schemas/AgentChatConfig'
        tools:
          description: Tools that the Agent is able to access
          type: array
          items:
            type: string
            format: uuid
          default: []
        settings:
          description: >-
            Additional settings associated with the Agent
          type: object
          additionalProperties: true
          default: {}
          example:
            conversationHistory: true
            accessDocs: true
            citations: true
            userCreativity: true
            userMaxLength: true
            userRemovePII: true
            userCustomInstructions: true
        tags:
          description: Tags associated with the Agent
          type: array
          items:
            type: string
          default: []
        meta:
          $ref: '#/components/schemas/Meta'
      required:
        - id
        - name
        - description
        - clone
        - featured
        - sharing
        - ownership
        - files
        - agency
        - welcomeMessage
        - templates
        - releaseState
        - knowledgeBases
        - defaultPipeline
        - rags
        - chat
        - tools
        - settings
        - tags
        - meta
    AgentCount:
      description: Count of all Agents visible to the user
      type: object
      properties:
        owner:
          description: Number of Agents owned by the user
          type: integer
          format: int32
          minimum: 0
        admin:
          description: Number of Agents with admin privileges
          type: integer
          format: int32
          minimum: 0
        shared:
          description: Number of Agents shared with the user
          type: integer
          format: int32
          minimum: 0
        public:
          description: Number of Agents shared with WOG
          type: integer
          format: int32
          minimum: 0
      required:
        - owner
        - admin
        - shared
        - public
    AgentBrief:
      description: Abbreviated details of an Agent
      type: object
      properties:
        id:
          description: Unique ID of the Agent
          type: string
          format: uuid
          readOnly: true
        name:
          description: Name of the Agent
          type: string
        description:
          description: Brief description of the Agent
          type: string
        featured:
          description: Indicates if the Agent is a featured Agent
          type: boolean
          readOnly: true
        agency:
          description: Agency associated with the Agent
          type: string
        meta:
          $ref: '#/components/schemas/Meta'
      required:
        - id
        - name
        - description
        - featured
        - agency
        - meta
    AgentPOST:
      description: POST request body for creating a Agent
      type: object
      properties:
        name:
          description: Name of the Agent
          type: string
        description:
          description: Brief description of the Agent
          type: string
        ownership:
          $ref: '#/components/schemas/Ownership'
        files:
          description: Non-embedded files associated with the Agent
          type: array
          items:
            type: string
            format: uuid
          default: []
        welcomeMessage:
          description: Welcome message the Agent will display when a new chat is created
          type: string
          default: "Hello! I am your assistant. How can I help you?"
        agency:
          description: Agency associated with the Agent
          type: string
        templates:
          description: Default templates to use with the Agent
          type: array
          items:
            $ref: '#/components/schemas/AgentTemplate'
          default: []
        knowledgeBases:
          description: Knowledge bases associated with Agent
          type: array
          items:
            $ref: '#/components/schemas/DataSource'
          default: []
        defaultPipeline:
          description: Default RAG pipeline to be used
          type: string
          nullable: true
          default: null
        rags:
          description: List of supported RAG pipelines
          type: array
          items:
            $ref: '#/components/schemas/RAGConfig'
          default: []
        chat:
          $ref: '#/components/schemas/AgentChatConfig'
        tools:
          description: Tools that the Agent is able to access
          type: array
          items:
            type: string
            format: uuid
          default: []
        settings:
          description: >-
            Additional settings associated with the Agent
          type: object
          additionalProperties: true
          default: {}
          example:
            conversationHistory: true
            accessDocs: true
            citations: true
            userCreativity: true
            userMaxLength: true
            userRemovePII: true
            userCustomInstructions: true
      required:
        - name
        - agency
    AgentPUT:
      description: PUT request body for updating an Agent
      type: object
      properties:
        name:
          description: Name of the Agent
          type: string
        description:
          description: Brief description of the Agent
          type: string
        files:
          description: Non-embedded files associated with the Agent
          type: array
          items:
            type: string
            format: uuid
        agency:
          description: Agency associated with the Agent
          type: string
        welcomeMessage:
          description: Welcome message the Agent will display when a new chat is created
          type: string
        templates:
          description: Default templates to use with the Agent
          type: array
          items:
            $ref: '#/components/schemas/AgentTemplate'
        chat:
          $ref: '#/components/schemas/AgentChatConfig'
        tools:
          description: Tools that the Agent is able to access
          type: array
          items:
            type: string
            format: uuid
          default: []
        settings:
          description: >-
            Additional settings associated with the Agent
          type: object
          additionalProperties: true
    AgentSharingPUT:
      description: >-
        PUT representation of the sharing details of an Agent
      properties:
        urlPath:
          description: URL slug to be updated
          type: string
    AgentRAGPipelinesPOST:
      description: >-
        POST representation of the RAG pipeline configuration details of an Agent
      properties:
        rags:
          description: List of supported RAG pipelines
          type: array
          items:
            $ref: '#/components/schemas/RAGConfig'
    AgentRAGPipelinesPUT:
      description: >-
        PUT representation of the RAG pipeline configuration details of an Agent
      properties:
        defaultPipeline:
          description: Default RAG pipeline to be used
          type: string
          nullable: true
      required:
        - defaultPipeline
    AgentApproval:
      allOf:
        - $ref: '#/components/schemas/AgentReleaseState'
        - description: Representation of the approval details for an Agent
          type: object
          properties:
            id:
              description: Unique ID of the Agent
              type: string
              format: uuid
              readOnly: true
            name:
              description: Name of the Agent
              type: string
            description:
              description: Brief description of the Agent
              type: string
            agency:
              description: Agency associated with the Agent
              type: string
            location:
              description: URL location to the Agent
              type: string
              format: uri
            owner:
              description: Owner of the Agent
              type: string
              format: uuid
          required:
            - id
            - name
            - description
            - agency
            - owner
            - location
    AgentApprovalPUT:
      description: PUT representation of an Agent Approval
      type: object
      properties:
        comments:
          description: Additional comments appended to the Agent
          type: array
          items:
            description: Comment details
            type: object
            properties:
              user:
                description: User who left the comment
                type: string
                format: uuid
              comment:
                description: Comment details
                type: string
            required:
              - user
              - comment
          default: []
      required:
        - comments

    # Chat Schemas
    ChatRoleType:
      type: string
      enum:
        - system
        - user
        - assistant
        - tool
      description: |-
        Chat roles for each individual message
        
        system = Message is a system message
        user = Message is a prompt from the user
        assistant = Message is a reply from the LLM model
        tool = Message is a tool call message
    Tokens:
      description: Tokens consumed during the LLM interaction
      type: object
      properties:
        query:
          description: Tokens consumed by the input query
          type: integer
          format: int32
          minimum: 0
          default: 0
        systemPrompt:
          description: Tokens consumed by the system prompt
          type: integer
          format: int32
          minimum: 0
          default: 0
        queryWithContext:
          description: Tokens consumed by the query and its context
          type: integer
          format: int32
          minimum: 0
          default: 0
        response:
          description: Tokens consumed by the output response
          type: integer
          format: int32
          minimum: 0
          default: 0
      additionalProperties:
        type: integer
        format: int32
        minimum: 0
      required:
        - query
        - systemPrompt
        - queryWithContext
        - response
    PromptTemplate:
      description: |-
        A generic structure that represents prompt templates used 
        to generate a prompt
      type: object
      properties:
        template:
          description: >-
            Prompt template to be utilised, prompt templates accept 
            variables that are substituted into the template in the
            following formats: ${variable} and $variable. These 
            variables need to be provided as strings in the variables
            object. If these variables are not provided, the placeholder
            variable will remain. If a "$" character is required in the 
            template, it needs to be escaped as follows: "$$"
          type: string
        variables:
          description: >-
            Contains all variables to be substituted into the prompt
            template.
          type: object
          additionalProperties:
            type: string
        placeholders:
          description: >-
            Placeholder variables extracted from the template string
          type: array
          items:
            description: Placeholder string
            type: string
          readOnly: true
      required:
        - template
        - variables
      example:
        template: >-
          You are a personal AI assistant with the personality: ${personality}\n\n
          Your purpose is: ${instructions}\n\n
          You must abide by the following rules: ${guardrails}\n\n
          You have knowledge of the following information: ${knowledgeBase}
        variables:
          personality: "helpful, clever, and very friendly"
          instructions: "You serve as a personal assistant to public officers in singapore"
          guardrails: "You will not answer politically sensitive topics"
          knowledgeBase: ""
        placeholders:
          - personality
          - instructions
          - guardrails
          - knowledgeBase
    PromptInteraction:
      description: Generic Prompt-based interaction structure
      type: object
      properties:
        role:
          $ref: '#/components/schemas/ChatRoleType'
        content:
          description: This is the prompt content of the message
          oneOf:
            - type: string
              format: text
        name:
          description: Name of the function called
          type: string
          nullable: true
          default: null
        timestamp:
          description: Timestamp when the prompt interaction was generated
          type: string
          format: date-time
          nullable: true
          default: null
      required:
        - role
        - content
    ChatInteraction:
      description: Generic representation of an interaction with an LLM model
      oneOf:
        - $ref: '#/components/schemas/PromptInteraction'
    Chunk:
      description: Chunks generated from the embeddings process
      type: object
      properties:
        id:
          description: ID of the Chunk generated by the respective pipelines
          type: integer
          format: int32
          minimum: 0
        source:
          description: Source details of the Chunk
          anyOf:
            - type: string
              format: uuid
            - type: string
              format: path
            - type: string
              format: url
        chunk:
          description: Chunk of text
          type: string
          nullable: true
        knowledgeBase:
          description: ID of the associated Knowledge Base
          type: string
          format: uuid
        score:
          description: VectorDB query score associated with the Chunk
          type: number
          format: float32
        metadata:
          description: Metadata associated with the Chunk
          type: object
          additionalProperties: true
      additionalProperties: true
      required:
        - id
        - source
        - chunk
        - knowledgeBase
        - score
        - metadata
    ChatMessage:
      description: Represents a single interaction with the LLM
      type: object
      properties:
        id:
          description: ID of the individual Chat Message
          type: string
          format: uuid
          readOnly: true
        chat:
          description: ID of the parent Chat
          type: string
          format: uuid
          readOnly: true
        tokens:
          $ref: '#/components/schemas/Tokens'
        query:
          $ref: '#/components/schemas/ChatInteraction'
        response:
          $ref: '#/components/schemas/ChatInteraction'
        systemPrompt:
          $ref: '#/components/schemas/ChatInteraction'
        model:
          $ref: '#/components/schemas/AIModelID'
        params:
          description: Parameters utilised during this message
          type: object
          additionalProperties: true
          default: {}
        properties:
          description: Additional business logic details associated with the message
          type: object
          additionalProperties: true
          default: {}
        liked:
          description: Indicates if this is a message that the user has liked
          type: boolean
          default: false
        pinned:
          description: Indicates if the message has been pinned
          type: boolean
          default: false
        rag:
          description: RAG pipeline query details associated with the message
          type: object
          properties:
            type:
              description: RAG pipeline type utilised in this message
              type: string
              nullable: true
            chunks:
              description: Chunks retrieved from the associated RAG pipeline
              type: array
              items:
                $ref: '#/components/schemas/Chunk'
              default: []
            citations:
              description: List of citation details from the associated RAG pipeline
              type: array
              items:
                type: object
                properties:
                  filename:
                    description: Filename of the associated chunk
                    type: string
                  knowledgeBase:
                    description: Knowledge Base ID of the associated chunk
                    type: string
                    format: uuid
                    nullable: true
                    default: null
              default: []
          required:
            - type
            - chunks
            - citations
      additionalProperties: true
      required:
        - id
        - query
        - response
        - systemPrompt
        - tokens
        - model
        - params
        - properties
        - liked
        - pinned
        - rag
    ChatMessagePOST:
      description: POST request body for creating a Chat Message
      type: object
      properties:
        content:
          description: Chat content details
          anyOf:
            - type: string
        params:
          description: Parameters utilised during this message
          type: object
          additionalProperties: true
          default: {}
        properties:
          description: Additional business details to be added
          type: object
          additionalProperties: true
          default: {}
    ChatMessagePUT:
      description: PUT request body when modifying a Chat Message
      type: object
      properties:
        liked:
          description: Indicates if this is a message that the user has liked
          type: boolean
          nullable: true
        pinned:
          description: Indicates if the message has been pinned
          type: boolean
          nullable: true
    ChatTokens:
      description: Chat tokens with cumulative queries and responses token values
      allOf:
        - $ref: '#/components/schemas/Tokens'
        - description: Cumulative token values
          type: object
          properties:
            queriesTotal:
              description: Total number of tokens incurred by queries
              type: integer
              format: int32
              minimum: 0
              default: 0
            responsesTotal:
              description: Total number of tokens incurred by responses
              type: integer
              format: int32
              minimum: 0
              default: 0
          required:
            - queriesTotal
            - responsesTotal
    Chat:
      description: Representation of a series of interactions with a particular LLM
      type: object
      properties:
        id:
          description: ID of the conversation
          type: string
          format: uuid
        name:
          description: Title of the conversation
          type: string
          maxLength: 200
        agents:
          description: IDs of associated Agents
          type: array
          items:
            type: string
            format: uuid
          minItems: 1
        userPrompt:
          $ref: '#/components/schemas/PromptTemplate'
        systemPrompt:
          $ref: '#/components/schemas/PromptTemplate'
        tokens:
          $ref: '#/components/schemas/ChatTokens'
        params:
          description: |-
            Parameter dictionary for overriding defaults prescribed by the AI Model
          type: object
          additionalProperties: true
          default: {}
        properties:
          description: Additional business logic details associated with the interaction
          type: object
          additionalProperties: true
          default: {}
        model:
          $ref: '#/components/schemas/AIModelID'
        meta:
          $ref: '#/components/schemas/Meta'
        messages:
          description: Associated Chat Message IDs
          type: array
          items:
            type: string
            format: uuid
          default: []
        pinned:
          description: Indicates if a conversation is pinned
          type: boolean
          default: false
      additionalProperties: true
      required:
        - id
        - name
        - agents
        - userPrompt
        - systemPrompt
        - tokens
        - params
        - properties
        - model
        - messages
        - meta
        - pinned
    ChatPOST:
      description: POST request for creating a new Chat
      properties:
        name:
          description: Title of the conversation
          type: string
          maxLength: 200
          default: ''
        agents:
          description: IDs of associated Agents
          type: array
          items:
            type: string
            format: uuid
          default: []
        userPrompt:
          $ref: '#/components/schemas/PromptTemplate'
        systemPrompt:
          $ref: '#/components/schemas/PromptTemplate'
        params:
          description: |-
            Parameter dictionary for overriding defaults prescribed by the AI Model
          type: object
          additionalProperties: true
          default: {}
        properties:
          description: Additional business logic details associated with the interaction
          type: object
          additionalProperties: true
          default: {}
        model:
          $ref: '#/components/schemas/AIModelID'
        pinned:
          description: Indicates if a conversation is pinned
          type: boolean
          default: false
      required:
        - agents
        - model
    ChatPUT:
      description: PUT request for modifying a Chat
      properties:
        name:
          description: Title of the conversation
          type: string
          maxLength: 200
          default: ''
        agents:
          description: IDs of associated Agents
          type: array
          items:
            type: string
            format: uuid
          minItems: 1
        userPrompt:
          $ref: '#/components/schemas/PromptTemplate'
        systemPrompt:
          $ref: '#/components/schemas/PromptTemplate'
        params:
          description: |-
            Parameter dictionary for overriding defaults prescribed by the AI Model
          type: object
          additionalProperties: true
          default: {}
        properties:
          description: Additional business logic details associated with the interaction
          type: object
          additionalProperties: true
          default: {}
        model:
          $ref: '#/components/schemas/AIModelID'
        pinned:
          description: Indicates if a conversation is pinned
          type: boolean
          default: false

    # RAG
    RAGPipelineStages:
      type: string
      enum:
        - source
        - extraction
        - chunking
        - embeddings
        - retrieval
        - chat
      description: >-
        RAG Pipeline Stages
        
        source = Importing data from various sources
        extraction = Extracting text and info from the data sources
        chunking = Generating chunks from the extracted text
        embeddings = Generating embeddings and storing embeddings in storage layer
        retrieval = Retrieving embeddings from the underlying storage layer
        chat = Sending retrieved context to the agent
    StateTransitions:
      description: Generic representation that consolidates the state transitions
      type: object
      properties:
        current:
          $ref: "#/components/schemas/ExecutionState"
        previous:
          $ref: "#/components/schemas/ExecutionState"
        timestamps:
          description: Latest timestamps for each state
          type: object
          additionalProperties:
            type: string
            format: date-time
        history:
          description: State transition history
          type: array
          items:
            $ref: '#/components/schemas/State'
          minItems: 1
      required:
        - current
        - previous
        - timestamps
        - history
    # TODO: Confirm the schema for a RAG pipeline
    RAGPipeline:
      description: >-
        Representation of a RAG pipeline configuration and associated status
      type: object
      properties:
        id:
          description: ID of the pipeline
          type: string
          format: uuid
          readOnly: true
        knowledgeBases:
          description: IDs of the associated Knowledge Bases
          type: array
          items:
            type: string
            format: uuid
          minItems: 1
          readOnly: true
      required:
        - id
        - knowledgeBases
    RAGPipelinePOST:
      description: POST representation for triggering a RAG pipeline
      type: object
      properties:
        pipelines:
          description: Pipelines associated with the respective Agent
          type: array
          items:
            type: string
            format: uuid
          default: []
        knowledgeBases:
          description: Knowledge Bases associated with the respective Agent
          type: array
          items:
            type: string
            format: uuid
          default: []
      required:
        - pipelines
        - knowledgeBases

    # Login
    SSOMoonshotLoginPOST:
      description: >-
        Request parameters for logging in via Moonshot infrastructure SSO
      type: object
      properties:
        accessToken:
          description: AWS SSO Access Token
          type: string
        identity:
          description: AWS SSO identity
          type: string
        data:
          description: AWS SSO data
          type: string
      required:
        - accessToken
        - identity
        - data
    OTPEmail:
      description: Required parameters for generating an OTP Email
      type: object
      properties:
        email:
          description: Email to send OTP Email to
          type: string
          format: email
      required:
        - email
    OTPLogin:
      description: Required parameters for logging in with an Email OTP
      type: object
      properties:
        email:
          description: Email to login with
          type: string
          format: email
        otp:
          description: OTP data to validated
          type: string
          minLength: 6
      required:
        - email
        - otp
    UserLogin:
      description: Login details of a User
      type: object
      properties:
        id:
          description: ID of the User
          type: string
          format: uuid
        name:
          description: Name of the User
          type: string
          maxLength: 200
        email:
          description: Email of the User
          type: string
          format: email
        new_user:
          description: Indicates that this is the first time a user is logging in
          type: boolean
          default: false
        token:
          description: JWT token value issued to a user
          type: string
          format: jwt
        refreshToken:
          description: Refresh token value issued to a user
          type: string
        refreshCount:
          description: Number of refresh attempts
          type: integer
          minimum: 0
        maxRefresh:
          description: Maximum number of allowable refresh attempts
          type: integer
          minimum: 0
        timestamp:
          description: Timestamp when the Login was generated
          type: string
          format: date-time
        expiry:
          description: Expiry timestamp for the token
          type: string
          format: date-time
        scopes:
          $ref: '#/components/schemas/ScopeList'
        role:
          description: ID of the associated User's Role
          type: string
          format: uuid
        superuser:
          description: Indicates if the User is a superuser
          type: boolean
          default: false
        agency:
          description: Agency code details of the User
          type: string
          nullable: true
          default: null
        agencyId:
          description: Agency ID details of the User
          type: string
          format: uuid
          nullable: true
          default: null
      required:
        - id
        - name
        - email
        - new_user
        - timestamp
        - expiry
    RefreshToken:
      description: Required parameters for refreshing a JWT token
      type: object
      properties:
        token:
          description: JWT refresh token value
          type: string
    UserQueriesPOST:
      description: POST representation of a user query
      type: object
      properties:
        ids: 
          description: IDs of the user
          type: array
          items:
            type: string
            format: uuid
          default: []
        emails:
          description: Email addresses associated with the user
          type: array
          items:
            type: string
          default: []
    UserBrief:
      description: Brief identifying details of a User
      properties:
        externalId:
          type: string
          description: >-
            Identifier of the resource useful from the perspective of 
            the provisioning client. See section 3.1 of RFC 7643
        userName:
          type: string
          description: >-
            Identifier for the user, typically used by the user to 
            directly authenticate (id and externalId are opaque identifiers 
            generally not known by users)
          nullable: true
          default: null
        displayName:
          description: Name of the user suitable for display to end-users
          type: string
          nullable: true
          default: null
        nickName:
          description: Casual way to address the user in real life
          type: string
          nullable: true
          default: null
        profileUrl:
          description: URI pointing to a location representing the User's online profile
          type: string
          format: uri
          nullable: true
          default: null
        title:
          description: Flexible string for representing a user's professional title
          type: string
          example: Vice President
          nullable: true
          default: null
        deleted:
          description: Indicates if the user has been deleted
          type: boolean
          default: false
        verified:
          description: Indicates if the user is a verified user
          type: boolean
          default: true
      required:
        - externalId
        - userName
        - displayName
        - nickName
        - profileUrl
        - title
        - deleted
        - verified
    UserProfilePUT:
      description: PUT schema for modifying a User's profile details
      type: object
      properties:
        description:
          description: Brief profile description of the User
          type: string
        agency:
          description: Agency of the User
          type: string
        settings:
          description: Product specific settings of the User
          type: object
          additionalProperties: true
        favourites:
          description: Bookmarked items of the User
          type: object
          additionalProperties:
            type: array
            items:
              type: string
              format: uuid
        details:
          description: Additional user profile details
          type: object
          additionalProperties: true
    GroupParentPUT:
      description: PUT schema for modifying a Group's parent details
      type: object
      properties:
        parent:
          description: ID of the Parent organisation
          type: string
          format: uuid
      required:
        - parent
    GroupChildrenPUT:
      description: PUT schema for modifying a Group's children details
      type: object
      properties:
        children:
          description: ID of the Child organisations
          type: array
          items:
            type: string
            format: uuid
      required:
        - children
    Agency:
      description: Representation of an Agency
      type: object
      properties:
        id:
          description: ID of the Agency
          type: string
          format: uuid
        agency:
          description: Agency name
          type: string
        domain:
          description: Agency domain
          type: string
      required:
        - id
        - agency
        - domain

    # Access controls
    AccessType:
      enum:
        - create_one
        - create_many
        - create
        - read_one
        - read_many
        - read
        - update_one
        - update_many
        - update
        - delete_one
        - delete_many
        - delete
        - allow
        - deny
      type: string
      description: >-
        Access Types for the Scope
        
        create_one = Create only a single resource
        create_many = Create only multiple resources
        create = Create both single and multiple resources
        read_one = Retrieve only a single resource
        read_many = Retrieve only multiple resources
        read = Retrieve both single and multiple resources
        update_one = Update only a single resource
        update_many = Update only multiple resources
        update = Update both single and multiple resources
        delete_one = Deletes only a single resource
        delete_many = Deletes only multiple resources
        delete = Deletes both single and multiple resources
        allow = Allows access to a particular UI resource
        deny = Denies access to a particular UI resource
    Scope:
      description: >-
        Representation of a Scope string expanded into its constituent parts
      type: object
      properties:
        scope:
          $ref: '#/components/schemas/ScopeStr'
        product:
          description: Product associated with Scope
          type: string
          default: "*"
        version:
          description: Product version associated with Scope
          type: string
          default: "*"
        resource:
          description: Resource that Scope is applied to
          type: string
          default: "*"
        fields:
          description: List of fields associated with Scope
          type: array
          items:
            description: Field and associated attributes
            type: object
            properties:
              field:
                description: Field name
                type: string
                default: "*"
              attributes:
                description: Associated attributes
                type: array
                items:
                  type: string
                default: []
            required:
              - field
              - attributes
        access:
          description: Access levels associated with Scope
          type: array
          items:
            $ref: '#/components/schemas/AccessType'
          default: []
      required:
        - scope
        - product
        - version
        - resource
        - fields
        - access
    AccessControlList:
      description: Representation of an Access Control List
      type: object
      properties:
        allow:
          description: Resources allowed access to the product
          type: array
          items:
            oneOf:
              - type: string
                format: email
              - type: string
                format: domain
              - type: string
                format: uuid
        deny:
          description: Resources denied access to the product
          type: array
          items:
            oneOf:
              - type: string
                format: email
              - type: string
                format: domain
              - type: string
                format: uuid
    AuthenticationControls:
      description: >-
        Representation of Authentication Controls, a consolidation of group 
        and user access control lists
      type: object
      properties:
        users:
          $ref: '#/components/schemas/AccessControlList'
        groups:
          $ref: '#/components/schemas/AccessControlList'
      required:
        - users
        - groups
    AuthenticationControlsPUT:
      description: >-
        Representation of Authentication Controls, a consolidation of group 
        and user access control lists
      type: object
      properties:
        users:
          $ref: '#/components/schemas/AccessControlList'
        groups:
          $ref: '#/components/schemas/AccessControlList'
    AuthorizationControlsPUT:
      description: >-
        Representation of Authorization Controls
      type: object
      properties:
        curr:
          $ref: '#/components/schemas/Ownership'
        new:
          $ref: '#/components/schemas/Ownership'
        productVersion:
          description: Product version details
          type: string
          nullable: true
          default: null
        ownershipResource:
          description: Ownership resource details
          type: string
          nullable: true
          default: null
        augmentAllow:
          description: Additional scopes to augment the allow scope with
          type: array
          items:
            type: string
          default: []
      required:
        - curr
        - new
    PermissionsType:
      type: string
      enum:
        - user
        - group
        - api_key
      description: >-
        Supported Item types
        
        user = Item is a user
        group = Item is a group
        api_key = Item is an API Key
        all = Globally available set of permissions
    Permissions:
      description: Representation of a Permission Set
      type: object
      properties:
        type:
          $ref: '#/components/schemas/PermissionsType'
        item:
          description: ID of the item
          type: string
        groups:
          description: Groups associated with the item
          type: array
          items:
            type: string
            format: uuid
          default: []
        scopes:
          description: Scope permissions strings associated with the item
          type: array
          items:
            type: string
          default: []
      required:
        - type
        - item
        - groups
        - scopes
    PermissionsPUT:
      description: PUT request body to modify an Item Permission Set
      type: object
      properties:
        groups:
          description: Groups associated with the item
          type: array
          items:
            type: string
            format: uuid
        scopes:
          description: Scope permissions strings associated with the item
          type: array
          items:
            type: string
    Role:
      description: Representation of a Role
      type: object
      properties:
        id:
          description: ID of the Role
          type: string
          format: uuid
          readOnly: true
        name:
          description: Name of the Role
          type: string
        description:
          description: Brief description of the API Key
          type: string
          default: ''
        superuser:
          description: Indicates that the user is a superuser
          type: boolean
          default: false
        scopes:
          $ref: '#/components/schemas/ScopeList'
        meta:
          $ref: '#/components/schemas/Meta'
      required:
        - id
        - name
        - description
        - superuser
        - scopes
        - meta
    RolePOST:
      description: POST request body of a Role
      type: object
      properties:
        name:
          description: Name of the Role
          type: string
        description:
          description: Brief description of the API Key
          type: string
          default: ''
        superuser:
          description: Indicates that the user is a superuser
          type: boolean
          default: false
        scopes:
          $ref: '#/components/schemas/ScopeList'
      required:
        - name
        - scopes
    RolePUT:
      description: PUT request body of a Role
      type: object
      properties:
        name:
          description: Name of the Role
          type: string
        description:
          description: Brief description of the API Key
          type: string
          default: ''
        superuser:
          description: Indicates that the user is a superuser
          type: boolean
          default: false
        scopes:
          $ref: '#/components/schemas/ScopeList'

    # API Keys
    APIKey:
      description: Representation of an API Key. This is an Atlas specific resource
      type: object
      properties:
        id:
          description: ID of the API Key
          type: string
          format: uuid
          readOnly: true
        name:
          description: API Key name suitable for display to end-users
          type: string
        description:
          description: Brief description of the API Key
          type: string
          default: ''
        truncatedKey:
          description: Last 6 digits of the original API Key
          type: string
          readOnly: true
        expiry:
          description: Expiry time of the API Key
          type: string
          nullable: true
          default: null
        scopes:
          description: Scope strings associated with the API Key
          type: array
          items:
            type: string
          default: []
        meta:
          $ref: '#/components/schemas/Meta'
      required:
        - id
        - name
        - description
        - truncatedKey
        - expiry
        - scopes
        - meta
    APIKeyPOST:
      description: POST request body when creating an API Key
      type: object
      properties:
        name:
          description: API Key name suitable for display to end-users
          type: string
        description:
          description: Brief description of the API Key
          type: string
          default: ''
        expiry:
          description: Expiry time of the API Key
          type: string
          nullable: true
          default: null
        scopes:
          description: Scope strings associated with the API Key
          type: array
          items:
            type: string
          default: []
      required:
        - name
        - description
        - expiry
        - scopes
    APIKeyPUT:
      description: PUT request body when modifying an API Key
      type: object
      properties:
        name:
          description: API Key name suitable for display to end-users
          type: string
        description:
          description: Brief description of the API Key
          type: string
          default: ''
        expiry:
          description: Expiry time of the API Key
          type: string
          nullable: true
          default: null
        scopes:
          description: Scope strings associated with the API Key
          type: array
          items:
            type: string
          default: []

    # SCIM Models
    ScimListResponseBase:
      description: Base pagination details of a SCIM list response
      type: object
      properties:
        schemas:
          type: array
          items:
            type: string
            example: 'urn:ietf:params:scim:api:messages:2.0:ListResponse'
        totalResults:
          type: integer
          description: Total number of results returned by the search. The value may be larger than the number of resources returned due to pagination
        startIndex:
          type: integer
          description: The 1-based index of the first result in the current set of search results
        itemsPerPage:
          type: integer
          description: The number of resources returned in a results page
    ScimGroupListResponse:
      description: Results for SCIM Groups search. See section 3.4.2.4 of RFC 7644
      allOf:
        - $ref: '#/components/schemas/ScimListResponseBase'
        - type: object
          properties:
            Resources:
              type: array
              items:
                $ref: '#/components/schemas/ScimGroup'
    ScimUserListResponse:
      description: Results for SCIM Users search. See section 3.4.2.4 of RFC 7644
      allOf:
        - $ref: '#/components/schemas/ScimListResponseBase'
        - type: object
          properties:
            Resources:
              type: array
              items:
                $ref: '#/components/schemas/ScimUser'
    ScimErrorResponse:
      description: SCIM API Error response structure. See section 3.12 of RFC 7644
      type: object
      properties:
        schemas:
          description: SCIM schema values
          type: array
          items:
            type: string
            example: urn:ietf:params:scim:api:messages:2.0:Error
        status:
          description: HTTP status code as string
          type: string
        scimType:
          description: A detail error keyword. See table 9 of RFC 7644
          type: string
        detail:
          description: A detailed human-readable message of the error
          type: string
      required:
        - status
    ScimResourceBase:
      description: Common SCIM resource fields
      type: object
      properties:
        schemas:
          type: array
          description: >-
            URIs that are used to indicate the namespaces of the SCIM schemas that 
            define the attributes present in the current structure
          items:
            type: string
        id:
          description: A unique identifier for a SCIM resource. See section 3.1 of RFC 7643
          type: string
        meta:
          $ref: '#/components/schemas/Meta'
    ScimStringProperty:
      description: Generic representation of a SCIM string property
      type: object
      properties:
        value:
          description: SCIM string property value
          type: string
        display:
          description: Display value of the property
          type: string
          nullable: true
          default: null
        type:
          description: Type of the property
          type: string
          nullable: true
          default: null
        primary:
          description: Denotes if this is the preferred value among others, if any
          type: boolean
          default: false
      required:
        - value
        - display
        - type
        - primary
    ScimReference:
      description: Generic representation of a reference to another SCIM resource.
      type: object
      properties:
        value:
          description: ID of referenced SCIM resource
          type: string
          format: uuid
        $ref:
          description: URI associated with the SCIM reference
          type: string
          example: https://atlas.gov.sg/scim/v2/Groups/deb2364b-92fc-4bd8-973c-9e6b1db0014a
          nullable: true
          default: null
        display:
          description: Display value of the referenced SCIM resource
          type: string
          example: Cult managers
          nullable: true
          default: null
        type:
          description: Describes the referenced SCIM resource relationship
          type: string
          example: direct
          nullable: true
          default: null
    ScimGroup:
      description: Representation of a SCIM Group. See section 4.2 of RFC 7643
      allOf:
        - $ref: '#/components/schemas/ScimResourceBase'
        - type: object
          properties:
            displayName:
              description: Group name suitable for display to end-users
              type: string
              nullable: true
              default: null
            members:
              description: Members associated with the Group
              type: array
              items:
                $ref: '#/components/schemas/ScimReference'
              default: []
            "urn:ietf:params:scim:schemas:extensions:atlas:2.0:Group":
              description: SCIM extensions for an Atlas Group
              properties:
                description:
                  description: Brief description of an Atlas Group
                  type: string
                  default: ''
                agency:
                  description: Home agency of an Atlas Group
                  type: string
                  nullable: true
                  default: null
                domain:
                  description: Domain of the Atlas Group
                  type: string
                  nullable: true
                  default: null
                apiKeys:
                  description: API keys associated with the Atlas Group
                  type: array
                  items:
                    $ref: '#/components/schemas/ScimReference'
                  default: []
                parent:
                  $ref: '#/components/schemas/ScimReference'
                children:
                  description: Sub-groups within the Atlas Group
                  type: array
                  items:
                    $ref: '#/components/schemas/ScimReference'
                  default: []
                details:
                  description: Additional details associated with the Atlas Group
                  type: object
                  additionalProperties: true
                allow:
                  description: Indicates if the Atlas Group should be allowed
                  type: boolean
                  default: true
                  readOnly: true
              required:
                - description
                - agency
                - domain
                - parent
                - children
                - apiKeys
                - details
                - allow
          required:
            - displayName
            - members
            - "urn:ietf:params:scim:schemas:extensions:atlas:2.0:Group"
    ScimGroupPOST:
      description: POST representation of a SCIM Group.
      type: object
      properties:
        displayName:
          description: Group name suitable for display to end-users
          type: string
          nullable: true
          default: null
        members:
          description: Members associated with the Group
          type: array
          items:
            $ref: '#/components/schemas/ScimReference'
          default: []
        "urn:ietf:params:scim:schemas:extensions:atlas:2.0:Group":
          description: SCIM extensions for an Atlas Group
          properties:
            description:
              description: Brief description of an Atlas Group
              type: string
              default: ''
            agency:
              description: Home agency of an Atlas Group
              type: string
              nullable: true
              default: null
            domain:
              description: Domain of the Atlas Group
              type: string
              nullable: true
              default: null
            apiKeys:
              description: API keys associated with the Atlas Group
              type: array
              items:
                $ref: '#/components/schemas/ScimReference'
              default: []
            parent:
              $ref: '#/components/schemas/ScimReference'
            children:
              description: Sub-groups within the Atlas Group
              type: array
              items:
                $ref: '#/components/schemas/ScimReference'
              default: []
            details:
              description: Additional details associated with the Atlas Group
              type: object
              additionalProperties: true
          required:
            - description
            - agency
            - domain
            - parent
            - children
            - apiKeys
            - details
      required:
        - displayName
    ScimGroupPUT:
      description: PUT representation of a SCIM Group.
      type: object
      properties:
        displayName:
          description: Group name suitable for display to end-users
          type: string
          nullable: true
          default: null
        members:
          description: Members associated with the Group
          type: array
          items:
            $ref: '#/components/schemas/ScimReference'
          default: []
        "urn:ietf:params:scim:schemas:extensions:atlas:2.0:Group":
          description: SCIM extensions for an Atlas Group
          properties:
            description:
              description: Brief description of an Atlas Group
              type: string
              default: ''
            agency:
              description: Home agency of an Atlas Group
              type: string
              nullable: true
              default: null
            domain:
              description: Domain of the Atlas Group
              type: string
              nullable: true
              default: null
            apiKeys:
              description: API keys associated with the Atlas Group
              type: array
              items:
                $ref: '#/components/schemas/ScimReference'
              default: []
            parent:
              $ref: '#/components/schemas/ScimReference'
            children:
              description: Sub-groups within the Atlas Group
              type: array
              items:
                $ref: '#/components/schemas/ScimReference'
              default: []
            details:
              description: Additional details associated with the Atlas Group
              type: object
              additionalProperties: true
    ScimUser:
      description: Representation of a SCIM User. See section 4.1 of RFC 7643
      allOf:
        - $ref: '#/components/schemas/ScimResourceBase'
        - type: object
          properties:
            externalId:
              type: string
              description: >-
                Identifier of the resource useful from the perspective of 
                the provisioning client. See section 3.1 of RFC 7643
            userName:
              type: string
              description: >-
                Identifier for the user, typically used by the user to 
                directly authenticate (id and externalId are opaque identifiers 
                generally not known by users)
              nullable: true
              default: null
            name:
              description: SCIM compliant name of a user. See section 4.1.1 of RFC 7643
              type: object
              properties:
                familyName:
                  description: Surname of the person
                  type: string
                  nullable: true
                  default: null
                givenName:
                  description: Given name of the person
                  type: string
                  nullable: true
                  default: null
                middleName:
                  description: Middle name of the person
                  type: string
                  nullable: true
                  default: null
                honorificPrefix:
                  description: A "title" like "Ms.", "Mrs."
                  type: string
                  nullable: true
                  default: null
                honorificSuffix:
                  description: Name suffix, like "Junior", "The great", "III"
                  type: string
                  nullable: true
                  default: null
                formatted:
                  description: >-
                    Full name, including all middle names, titles, and suffixes as appropriate
                  type: string
                  nullable: true
                  default: null
              nullable: true
              default: null
            displayName:
              description: Name of the user suitable for display to end-users
              type: string
              nullable: true
              default: null
            nickName:
              description: Casual way to address the user in real life
              type: string
              nullable: true
              default: null
            profileUrl:
              description: URI pointing to a location representing the User's online profile
              type: string
              format: uri
              nullable: true
              default: null
            title:
              description: Flexible string for representing a user's professional title
              type: string
              example: Vice President
              nullable: true
              default: null
            userType:
              description: Used to identify the relationship between the organization and the user
              type: string
              example: Contractor
              nullable: true
              default: null
            preferredLanguage:
              description: Preferred language as used in the Accept-Language HTTP header
              type: string
              default: en
              nullable: true
            locale:
              type: string
              description: Used for purposes of localizing items such as currency and dates
              default: en_SG
            timezone:
              description: Timezone of the user
              type: string
              default: Singapore
            active:
              description: Indicates if the user's account is currently active
              type: boolean
              default: true
            password:
              description: Salted password of the user
              type: string
              nullable: true
              default: null
            emails:
              description: Associated email addresses of the user. See section 4.1.2 of RFC 7643
              type: array
              items:
                $ref: '#/components/schemas/ScimStringProperty'
              default: []
            phoneNumbers:
              description: Associated phone numbers of the user. See section 4.1.2 of RFC 7643
              type: array
              items:
                $ref: '#/components/schemas/ScimStringProperty'
              default: []
            ims:
              description: Associated Instant Messaging handles of the user. See section 4.1.2 of RFC 7643
              type: array
              items:
                $ref: '#/components/schemas/ScimStringProperty'
              default: []
            photos:
              description: Associated photo URLs of the user. See section 4.1.2 of RFC 7643
              type: array
              items:
                $ref: '#/components/schemas/ScimStringProperty'
              default: []
            addresses:
              description: Associated addresses of the user. See section 4.1.2 of RFC 7643
              type: array
              items:
                type: object
                properties:
                  formatted:
                    description: Full mailing address, formatted for display or use with a mailing label
                    type: string
                    nullable: true
                    default: null
                  streetAddress:
                    description: Street field of the user's address
                    type: string
                    nullable: true
                    default: null
                    example: 56 Acacia Avenue
                  locality:
                    description: City or locality of the address
                    type: string
                    nullable: true
                    default: null
                  region:
                    description: State or region of the address
                    type: string
                    nullable: true
                    default: null
                  postalCode:
                    type: string
                    description: Zip code
                  country:
                    type: string
                    description: Country expressed in ISO 3166-1 "alpha-2" code format
                    example: UK
                  type:
                    type: string
                    example: home
                  primary:
                    type: boolean
                    description: Denotes if this is the preferred address among others, if any
                description: Physical mailing address for this user. See section 4.1.2 of RFC 7643
            groups:
              description: Associated groups the user belongs to. See section 4.1.2 of RFC 7643
              type: array
              items:
                $ref: '#/components/schemas/ScimReference'
              default: []
            entitlements:
              description: >-
                Entitlements represent things a user has, like permission rights. See section 4.1.2 of RFC 7643
              type: array
              items:
                $ref: '#/components/schemas/ScimStringProperty'
              default: []
            roles:
              description: Professional roles that the user holds. See section 4.1.2 of RFC 7643
              type: array
              items:
                $ref: '#/components/schemas/ScimStringProperty'
              default: []
            x509Certificates:
              description: A DER-encoded certificate associated with the user. See section 4.1.2 of RFC 7643
              type: array
              items:
                $ref: '#/components/schemas/ScimStringProperty'
              default: []
            "urn:ietf:params:scim:schemas:extensions:atlas:2.0:User":
              description: SCIM extensions for an Atlas User
              type: object
              properties:
                description:
                  description: Descriptive information about a user's profile
                  type: string
                  default: ''
                agency:
                  description: Home agency of the user
                  type: string
                  nullable: true
                  default: null
                settings:
                  description: Customised settings that defines the user's experience
                  type: object
                  additionalProperties: true
                  default: {}
                favourites:
                  description: List of user favourites according to category
                  type: object
                  additionalProperties:
                    description: User favourites according to category
                    type: array
                    items:
                      type: string
                      format: uuid
                  default: {}
                details:
                  description: Additional details associated with a user
                  type: object
                  additionalProperties: true
                  default: {}
                verified:
                  description: Indicates if the user has been verified
                  type: boolean
                  default: true
                  readOnly: true
                apiKeys:
                  description: API keys associated with the user
                  type: array
                  items:
                    $ref: '#/components/schemas/ScimReference'
                  default: []
                  readOnly: true
                allow:
                  description: Indicates if the user is allowed or blocked
                  type: boolean
                  default: true
                  readOnly: true
              required:
                - description
                - agency
                - settings
                - favourites
                - details
                - verified
                - apiKeys
                - allow
          required:
            - externalId
            - userName
            - displayName
            - name
            - nickName
            - profileUrl
            - title
            - userType
            - preferredLanguage
            - locale
            - timezone
            - active
            - password
            - emails
            - phoneNumbers
            - ims
            - photos
            - addresses
            - groups
            - entitlements
            - roles
            - x509Certificates
            - "urn:ietf:params:scim:schemas:extensions:atlas:2.0:User"
    ScimUserPOST:
      description: POST representation of a SCIM User
      type: object
      properties:
        externalId:
          type: string
          description: >-
            Identifier of the resource useful from the perspective of 
            the provisioning client. See section 3.1 of RFC 7643
        userName:
          type: string
          description: >-
            Identifier for the user, typically used by the user to 
            directly authenticate (id and externalId are opaque identifiers 
            generally not known by users)
          nullable: true
          default: null
        name:
          description: SCIM compliant name of a user. See section 4.1.1 of RFC 7643
          type: object
          properties:
            familyName:
              description: Surname of the person
              type: string
              nullable: true
              default: null
            givenName:
              description: Given name of the person
              type: string
              nullable: true
              default: null
            middleName:
              description: Middle name of the person
              type: string
              nullable: true
              default: null
            honorificPrefix:
              description: A "title" like "Ms.", "Mrs."
              type: string
              nullable: true
              default: null
            honorificSuffix:
              description: Name suffix, like "Junior", "The great", "III"
              type: string
              nullable: true
              default: null
            formatted:
              description: >-
                Full name, including all middle names, titles, and suffixes as appropriate
              type: string
              nullable: true
              default: null
          nullable: true
          default: null
        displayName:
          description: Name of the user suitable for display to end-users
          type: string
          nullable: true
          default: null
        nickName:
          description: Casual way to address the user in real life
          type: string
          nullable: true
          default: null
        profileUrl:
          description: URI pointing to a location representing the User's online profile
          type: string
          format: uri
          nullable: true
          default: null
        title:
          description: Flexible string for representing a user's professional title
          type: string
          example: Vice President
          nullable: true
          default: null
        userType:
          description: Used to identify the relationship between the organization and the user
          type: string
          example: Contractor
          nullable: true
          default: null
        preferredLanguage:
          description: Preferred language as used in the Accept-Language HTTP header
          type: string
          default: en
          nullable: true
        locale:
          type: string
          description: Used for purposes of localizing items such as currency and dates
          default: en_SG
        timezone:
          description: Timezone of the user
          type: string
          default: Singapore
        active:
          description: Indicates if the user's account is currently active
          type: boolean
          default: true
        password:
          description: Salted password of the user
          type: string
          nullable: true
          default: null
        emails:
          description: Associated email addresses of the user. See section 4.1.2 of RFC 7643
          type: array
          items:
            $ref: '#/components/schemas/ScimStringProperty'
          default: []
        phoneNumbers:
          description: Associated phone numbers of the user. See section 4.1.2 of RFC 7643
          type: array
          items:
            $ref: '#/components/schemas/ScimStringProperty'
          default: []
        ims:
          description: Associated Instant Messaging handles of the user. See section 4.1.2 of RFC 7643
          type: array
          items:
            $ref: '#/components/schemas/ScimStringProperty'
          default: []
        photos:
          description: Associated photo URLs of the user. See section 4.1.2 of RFC 7643
          type: array
          items:
            $ref: '#/components/schemas/ScimStringProperty'
          default: []
        addresses:
          description: Associated addresses of the user. See section 4.1.2 of RFC 7643
          type: array
          items:
            type: object
            properties:
              formatted:
                description: Full mailing address, formatted for display or use with a mailing label
                type: string
                nullable: true
                default: null
              streetAddress:
                description: Street field of the user's address
                type: string
                nullable: true
                default: null
                example: 56 Acacia Avenue
              locality:
                description: City or locality of the address
                type: string
                nullable: true
                default: null
              region:
                description: State or region of the address
                type: string
                nullable: true
                default: null
              postalCode:
                type: string
                description: Zip code
              country:
                type: string
                description: Country expressed in ISO 3166-1 "alpha-2" code format
                example: UK
              type:
                type: string
                example: home
              primary:
                type: boolean
                description: Denotes if this is the preferred address among others, if any
            description: Physical mailing address for this user. See section 4.1.2 of RFC 7643
        groups:
          description: Associated groups the user belongs to. See section 4.1.2 of RFC 7643
          type: array
          items:
            $ref: '#/components/schemas/ScimReference'
          default: []
        entitlements:
          description: >-
            Entitlements represent things a user has, like permission rights. See section 4.1.2 of RFC 7643
          type: array
          items:
            $ref: '#/components/schemas/ScimStringProperty'
          default: []
        roles:
          description: Professional roles that the user holds. See section 4.1.2 of RFC 7643
          type: array
          items:
            $ref: '#/components/schemas/ScimStringProperty'
          default: []
        x509Certificates:
          description: A DER-encoded certificate associated with the user. See section 4.1.2 of RFC 7643
          type: array
          items:
            $ref: '#/components/schemas/ScimStringProperty'
          default: []
        "urn:ietf:params:scim:schemas:extensions:atlas:2.0:User":
          description: SCIM extensions for an Atlas User
          type: object
          properties:
            description:
              description: Descriptive information about a user's profile
              type: string
              default: ''
            agency:
              description: Home agency of the user
              type: string
              nullable: true
              default: null
            settings:
              description: Customised settings that defines the user's experience
              type: object
              additionalProperties: true
              default: {}
            favourites:
              description: List of user favourites according to category
              type: object
              additionalProperties:
                description: User favourites according to category
                type: array
                items:
                  type: string
                  format: uuid
              default: {}
            details:
              description: Additional details associated with a user
              type: object
              additionalProperties: true
              default: {}
            verified:
              description: Indicates if the user has been verified
              type: boolean
              default: true
              readOnly: true
            apiKeys:
              description: API keys associated with the user
              type: array
              items:
                $ref: '#/components/schemas/ScimReference'
              default: []
              readOnly: true
            allow:
              description: Indicates if the user is allowed or blocked
              type: boolean
              default: true
              readOnly: true
          required:
            - description
            - agency
            - settings
            - favourites
            - details
            - verified
            - apiKeys
            - allow
      required:
        - externalId
        - userName
        - displayName
        - name
        - nickName
        - profileUrl
        - title
        - userType
        - preferredLanguage
        - locale
        - timezone
        - active
        - password
        - emails
        - phoneNumbers
        - ims
        - photos
        - addresses
        - groups
        - entitlements
        - roles
        - x509Certificates
        - "urn:ietf:params:scim:schemas:extensions:atlas:2.0:User"
    ScimUserPut:
      description: PUT representation of a SCIM User
      type: object
      properties:
        externalId:
          type: string
          description: >-
            Identifier of the resource useful from the perspective of 
            the provisioning client. See section 3.1 of RFC 7643
        userName:
          type: string
          description: >-
            Identifier for the user, typically used by the user to 
            directly authenticate (id and externalId are opaque identifiers 
            generally not known by users)
          nullable: true
          default: null
        name:
          description: SCIM compliant name of a user. See section 4.1.1 of RFC 7643
          type: object
          properties:
            familyName:
              description: Surname of the person
              type: string
              nullable: true
              default: null
            givenName:
              description: Given name of the person
              type: string
              nullable: true
              default: null
            middleName:
              description: Middle name of the person
              type: string
              nullable: true
              default: null
            honorificPrefix:
              description: A "title" like "Ms.", "Mrs."
              type: string
              nullable: true
              default: null
            honorificSuffix:
              description: Name suffix, like "Junior", "The great", "III"
              type: string
              nullable: true
              default: null
            formatted:
              description: >-
                Full name, including all middle names, titles, and suffixes as appropriate
              type: string
              nullable: true
              default: null
          nullable: true
          default: null
        displayName:
          description: Name of the user suitable for display to end-users
          type: string
          nullable: true
          default: null
        nickName:
          description: Casual way to address the user in real life
          type: string
          nullable: true
          default: null
        profileUrl:
          description: URI pointing to a location representing the User's online profile
          type: string
          format: uri
          nullable: true
          default: null
        title:
          description: Flexible string for representing a user's professional title
          type: string
          example: Vice President
          nullable: true
          default: null
        userType:
          description: Used to identify the relationship between the organization and the user
          type: string
          example: Contractor
          nullable: true
          default: null
        preferredLanguage:
          description: Preferred language as used in the Accept-Language HTTP header
          type: string
          default: en
          nullable: true
        locale:
          type: string
          description: Used for purposes of localizing items such as currency and dates
          default: en_SG
        timezone:
          description: Timezone of the user
          type: string
          default: Singapore
        active:
          description: Indicates if the user's account is currently active
          type: boolean
          default: true
        password:
          description: Salted password of the user
          type: string
          nullable: true
          default: null
        emails:
          description: Associated email addresses of the user. See section 4.1.2 of RFC 7643
          type: array
          items:
            $ref: '#/components/schemas/ScimStringProperty'
          default: []
        phoneNumbers:
          description: Associated phone numbers of the user. See section 4.1.2 of RFC 7643
          type: array
          items:
            $ref: '#/components/schemas/ScimStringProperty'
          default: []
        ims:
          description: Associated Instant Messaging handles of the user. See section 4.1.2 of RFC 7643
          type: array
          items:
            $ref: '#/components/schemas/ScimStringProperty'
          default: []
        photos:
          description: Associated photo URLs of the user. See section 4.1.2 of RFC 7643
          type: array
          items:
            $ref: '#/components/schemas/ScimStringProperty'
          default: []
        addresses:
          description: Associated addresses of the user. See section 4.1.2 of RFC 7643
          type: array
          items:
            type: object
            properties:
              formatted:
                description: Full mailing address, formatted for display or use with a mailing label
                type: string
                nullable: true
                default: null
              streetAddress:
                description: Street field of the user's address
                type: string
                nullable: true
                default: null
                example: 56 Acacia Avenue
              locality:
                description: City or locality of the address
                type: string
                nullable: true
                default: null
              region:
                description: State or region of the address
                type: string
                nullable: true
                default: null
              postalCode:
                type: string
                description: Zip code
              country:
                type: string
                description: Country expressed in ISO 3166-1 "alpha-2" code format
                example: UK
              type:
                type: string
                example: home
              primary:
                type: boolean
                description: Denotes if this is the preferred address among others, if any
            description: Physical mailing address for this user. See section 4.1.2 of RFC 7643
        groups:
          description: Associated groups the user belongs to. See section 4.1.2 of RFC 7643
          type: array
          items:
            $ref: '#/components/schemas/ScimReference'
          default: []
        entitlements:
          description: >-
            Entitlements represent things a user has, like permission rights. See section 4.1.2 of RFC 7643
          type: array
          items:
            $ref: '#/components/schemas/ScimStringProperty'
          default: []
        roles:
          description: Professional roles that the user holds. See section 4.1.2 of RFC 7643
          type: array
          items:
            $ref: '#/components/schemas/ScimStringProperty'
          default: []
        x509Certificates:
          description: A DER-encoded certificate associated with the user. See section 4.1.2 of RFC 7643
          type: array
          items:
            $ref: '#/components/schemas/ScimStringProperty'
          default: []
        "urn:ietf:params:scim:schemas:extensions:atlas:2.0:User":
          description: SCIM extensions for an Atlas User
          type: object
          properties:
            description:
              description: Descriptive information about a user's profile
              type: string
              default: ''
            agency:
              description: Home agency of the user
              type: string
              nullable: true
              default: null
            settings:
              description: Customised settings that defines the user's experience
              type: object
              additionalProperties: true
              default: {}
            favourites:
              description: List of user favourites according to category
              type: object
              additionalProperties:
                description: User favourites according to category
                type: array
                items:
                  type: string
                  format: uuid
              default: {}
            details:
              description: Additional details associated with a user
              type: object
              additionalProperties: true
              default: {}
            verified:
              description: Indicates if the user has been verified
              type: boolean
              default: true
              readOnly: true
            apiKeys:
              description: API keys associated with the user
              type: array
              items:
                $ref: '#/components/schemas/ScimReference'
              default: []
              readOnly: true
            allow:
              description: Indicates if the user is allowed or blocked
              type: boolean
              default: true
              readOnly: true
          required:
            - description
            - agency
            - settings
            - favourites
            - details
            - verified
            - apiKeys
            - allow

    # Resource Counters
    RotationDetails:
      description: Details on Counter rotation
      type: object
      properties:
        cycles:
          description: Number of rotation cycles
          type: integer
          format: int32
          minimum: 0
          default: 0
        timestamp:
          description: Last rotation timestamp
          type: string
          format: date-time
          nullable: true
          default: null
      required:
        - cycles
        - timestamp
    Tracker:
      description: Representation of a count Tracker
      type: object
      properties:
        id:
          description: >-
            ID of the count Tracker, corresponds to a User ID, an API Key ID, 
            or self-defined according to the tracking requirements. Additional 
            details can be stored in the metadata field
          type: string
          readOnly: true
        metadata:
          description: Metadata associated with the count Tracker
          type: object
          readOnly: true
          properties:
            agency:
              description: Agency associated with the count Tracker
              type: string
              nullable: true
              default: null
            groups:
              description: ID of the groups associated with the count Tracker
              type: array
              items:
                type: string
                format: uuid
              default: []
          additionalProperties: true
        totals:
          description: Total count values
          type: object
          readOnly: true
          properties:
            total:
              description: Total value
              type: integer
              format: int32
              minimum: 0
              default: 0
            daily:
              description: Daily count value, rotation start at 0000 every day
              type: integer
              format: int32
              minimum: 0
              default: 0
            weekly:
              description: Weekly count value, rotation starts from when the Counter was created
              type: integer
              format: int32
              minimum: 0
              default: 0
            monthly:
              description: Monthly count value, rotation starts from when the Counter was created
              type: integer
              format: int32
              minimum: 0
              default: 0
            annually:
              description: Annual count value, rotation starts from when the Counter was created
              type: integer
              format: int32
              minimum: 0
              default: 0
        rotations:
          description: Rotation details
          type: object
          nullable: true
          readOnly: true
          properties:
            daily:
              $ref: '#/components/schemas/RotationDetails'
            weekly:
              $ref: '#/components/schemas/RotationDetails'
            monthly:
              $ref: '#/components/schemas/RotationDetails'
            annually:
              $ref: '#/components/schemas/RotationDetails'
          required:
            - daily
            - weekly
            - monthly
            - annually
        meta:
          $ref: '#/components/schemas/Meta'
      required:
        - id
        - metadata
        - totals
        - meta
    TrackerPOST:
      description: POST request body of a Tracker
      type: object
      properties:
        metadata:
          description: Metadata associated with a Tracker
          type: object
          additionalProperties: true
          default: {}
        resourceType:
          description: Resource type associated with a Tracker
          type: string
          nullable: true
          default: null

    # Events
    EventChannels:
      type: string
      enum:
        - websockets
        - emails
        - webhooks
      description: >-
        Supported Broadcast channels of the Event
        
        websockets = Event to be broadcasted by websockets
        emails = Event to be broadcasted by email
        webhooks = Event to be broadcasted to registered webhook
    Event:
      description: Representation of a system event that occurred
      type: object
      properties:
        id:
          description: Unique ID of the Event
          type: string
          format: uuid
          readOnly: true
        summary:
          description: Short summary message of the Event
          type: string
        message:
          description: Detailed message content of the Event
          type: string
          nullable: true
          default: null
        details:
          description: Additional details associated with the Event
          type: object
          additionalProperties: true
          default: {}
        topics:
          description: Topics associated with the Event
          type: array
          items:
            type: string
          minItems: 1
        channels:
          description: Additional broadcast channels
          type: array
          items:
            $ref: '#/components/schemas/EventChannels'
          default: []
        created:
          description: Timestamp an event was created
          type: string
          format: date-time
      required:
      - id
      - summary
      - message
      - details
      - topics
      - channels
      - created
    WebhookHost:
      description: >-
        Representation of a webhook host which will receive Event push notifications
      type: object
      properties:
        id:
          description: ID of the Webhook Host
          type: string
          format: uuid
          readOnly: true
        name:
          description: Name of the Webhook Host
          type: string
        description:
          description: Brief description of the Webhook Host
          type: string
          default: ''
        url:
          description: URL of the Webhook Host
          type: string
          format: uri
        auth:
          description: Authentication details associated with the Webhook Host
          type: object
          additionalProperties: true
          default: {}
        retries:
          description: Number of retries attempts before giving up, defaults to 3
          type: integer
          format: int32
          minimum: 0
          default: 3
        meta:
          $ref: '#/components/schemas/Meta'
      required:
        - id
        - name
        - description
        - url
        - auth
        - retries
        - meta
    WebhookHostPOST:
      description: POST request body of a Webhook Host
      type: object
      properties:
        name:
          description: Name of the Webhook Host
          type: string
        description:
          description: Brief description of the Webhook Host
          type: string
          default: ''
        url:
          description: URL of the Webhook Host
          type: string
          format: uri
        auth:
          description: Authentication details associated with the Webhook Host
          type: object
          additionalProperties: true
          default: {}
        retries:
          description: Number of retries attempts before giving up, defaults to 3
          type: integer
          format: int32
          minimum: 0
          default: 3
      required:
        - name
        - url
    WebhookHostPUT:
      description: PUT request body of a Webhook Host
      type: object
      properties:
        name:
          description: Name of the Webhook Host
          type: string
        description:
          description: Brief description of the Webhook Host
          type: string
          default: ''
        url:
          description: URL of the Webhook Host
          type: string
          format: uri
        auth:
          description: Authentication details associated with the Webhook Host
          type: object
          additionalProperties: true
          default: {}
        retries:
          description: Number of retries attempts before giving up, defaults to 3
          type: integer
          format: int32
          minimum: 0
          default: 3

    # Internals
    MaintenanceNotification:
      description: Representation of a Maintenance Notification
      type: object
      properties:
        name:
          description: Name of the Maintenance Notification
          type: string
        description:
          description: Brief description of the Maintenance Notification
          type: string
        html:
          description: Main HTML file
          type: string
          format: uuid
        files:
          type: array
          items:
            type: string
            format: uuid
          default: []
        start:
          description: Start duration of the Maintenance Window
          type: string
          format: date-time
        end:
          description: End duration of the Maintenance Window
          type: string
          format: date-time
          nullable: true
          default: null
      required:
        - name
        - description
        - html
        - files
        - start
        - end

  parameters:
    IDParam:
      name: id
      description: A unique ID string
      in: path
      required: true
      schema:
        type: string
        format: uuid
    SecondaryIDParam:
      name: secondary_id
      description: A unique ID string
      in: path
      required: true
      schema:
        type: string
        format: uuid
    IDListParam:
      name: ids
      description: A list of optional IDs
      in: query
      schema:
        type: array
        items:
          type: string
          format: uuid
      style: form
      explode: true
    RequiredIDListParam:
      name: ids
      description: A list of required IDs
      in: query
      required: true
      schema:
        type: array
        items:
          type: string
          format: uuid
      style: form
      explode: true
    PaginationLimitParam:
      name: limit
      description: Number of items per page
      in: query
      required: false
      schema:
        type: number
        format: int32
        default: 50
        minimum: 0
    PaginationOffsetParam:
      name: offset
      description: Number of items skipped
      in: query
      required: false
      schema:
        type: number
        format: int32
        default: 0
        minimum: 0

    # SCIM parameters
    ScimIDParam:
      description: SCIM ID parameter
      name: id
      in: path
      schema:
        type: string
      required: true
    ScimAttributesParam:
      name: attributes
      in: query
      description: A comma-separated list of attribute names to return in the response
      schema:
        type: string
      required: false
    ScimExcludedAttributesParam:
      name: excludedAttributes
      in: query
      description: When specified, the response will contain a default set of attributes minus those listed here (as a comma-separated list)
      schema:
        type: string
      required: false
    ScimFilterParam:
      name: filter
      in: query
      description: An expression specifying the search criteria. See section 3.4.2.2 of RFC 7644
      example: userName eq "jhon" and meta.lastModified gt "2011-05-13T04:42:34Z"
      schema:
        type: string
      required: false
    ScimStartIndexParam:
      name: startIndex
      in: query
      description: The 1-based index of the first query result
      schema:
        type: integer
      required: false
    ScimCountParam:
      name: count
      in: query
      description: Specifies the desired maximum number of query results per page
      schema:
        type: integer
      required: false
    ScimSortByParam:
      name: sortBy
      in: query
      description: The attribute whose value will be used to order the returned responses
      schema:
        type: string
      required: false
    ScimSortOrderParam:
      name: sortOrder
      in: query
      description: Order in which the sortBy param is applied. Allowed values are "ascending" and "descending"
      schema:
        type: string
      required: false

  responses:
    CreatedResponse:
      description: Successfully created resource with ID
      content:
        application/json:
          schema:
            description: Generated resource ID
            type: object
            properties:
              id:
                description: Unique ID of the resource
                type: string
                format: uuid
            required:
              - id
    UpdatedResponse:
      description: Successfully updated specified resource
    DeletedResponse:
      description: Successfully deleted specified resource(s)
    TriggeredResponse:
      description: Successfully triggered an activity
    InvalidParametersError:
      description: Invalid parameter(s)
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/APIError'
          example:
            code: 400
            message: Invalid parameters provided
    AuthenticationError:
      description: Authentication error
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/APIError'
          example:
            code: 401
            message: Unauthorised usage of the API
    PermissionsError:
      description: Insufficient permissions error
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/APIError'
          example:
            code: 403
            message: Insufficient permissions to use API
    NotFoundError:
      description: Specified resource(s) was not found
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/APIError'
          example:
            code: 404
            message: Specified resource(s) was not found
    DuplicateEntryError:
      description: Duplicate entry
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/APIError'
          example:
            code: 409
            message: Attempt to create duplicate entry
    UnsupportedMediaTypeError:
      description: Unsupported media content was uploaded
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/APIError'
          example:
            code: 415
            message: Unsupported media content was uploaded to the server
    InvalidCreationError:
      description: Unable to create resource due to errors
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/APIError'
          example:
            code: 422
            message: Unable to create resource
    InvalidUpdateError:
      description: Unable to update resource due to errors
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/APIError'
          example:
            code: 422
            message: Unable to update resource
    InvalidDeletionError:
      description: Unable to delete resource as preconditions were not met
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/APIError'
          example:
            code: 422
            message: Unable to delete resource
    RateLimitError:
      description: API was called too many times
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/APIError'
          example:
            code: 429
            message: API was invoked too many times
    InternalServerError:
      description: Internal server error
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/APIError'
          example:
            code: 500
            message: Internal server error

    # SCIM responses
    ScimInvalidPayloadError:
      description: Invalid SCIM payload was supplied
      content:
        application/scim+json:
          schema:
            $ref: '#/components/schemas/ScimErrorResponse'
        application/json:
          schema:
            $ref: '#/components/schemas/ScimErrorResponse'
    ScimInvalidParametersError:
      description: |
        Parameter count exceeds the maximum allowed value, the filter supplied was unparsable,
        or invalid schema in search request
      content:
        application/scim+json:
          schema:
            $ref: '#/components/schemas/ScimErrorResponse'
        application/json:
          schema:
            $ref: '#/components/schemas/ScimErrorResponse'
    ScimNotFoundError:
      description: Id passed unknown
      content:
        application/scim+json:
          schema:
            $ref: '#/components/schemas/ScimErrorResponse'
        application/json:
          schema:
            $ref: '#/components/schemas/ScimErrorResponse'
    ScimDuplicateEntryError:
      description: There is a conflict with an already existing resource
      content:
        application/scim+json:
          schema:
            $ref: '#/components/schemas/ScimErrorResponse'
        application/json:
          schema:
            $ref: '#/components/schemas/ScimErrorResponse'
    ScimInternalServerError:
      description: There was an unexpected failure executing the operation
      content:
        application/scim+json:
          schema:
            $ref: '#/components/schemas/ScimErrorResponse'
        application/json:
          schema:
            $ref: '#/components/schemas/ScimErrorResponse'

  securitySchemes:
    AtlasAuth:
      description: Atlas JWT authentication token
      type: http
      scheme: bearer
      bearerFormat: JWT
    AtlasAPIKey:
      description: Atlas API Key authentication
      type: apiKey
      in: header
      name: X-ATLAS-Key
